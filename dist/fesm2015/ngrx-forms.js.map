{"version":3,"file":"ngrx-forms.js","sources":["ng://ngrx-forms/src/actions.ts","ng://ngrx-forms/src/boxing.ts","ng://ngrx-forms/src/util.ts","ng://ngrx-forms/src/state.ts","ng://ngrx-forms/src/control/reducer/clear-async-error.ts","ng://ngrx-forms/src/control/reducer/disable.ts","ng://ngrx-forms/src/control/reducer/enable.ts","ng://ngrx-forms/src/control/reducer/focus.ts","ng://ngrx-forms/src/control/reducer/mark-as-dirty.ts","ng://ngrx-forms/src/control/reducer/mark-as-pristine.ts","ng://ngrx-forms/src/control/reducer/mark-as-submitted.ts","ng://ngrx-forms/src/control/reducer/mark-as-touched.ts","ng://ngrx-forms/src/control/reducer/mark-as-unsubmitted.ts","ng://ngrx-forms/src/control/reducer/mark-as-untouched.ts","ng://ngrx-forms/src/control/reducer/reset.ts","ng://ngrx-forms/src/control/reducer/set-async-error.ts","ng://ngrx-forms/src/control/reducer/set-errors.ts","ng://ngrx-forms/src/control/reducer/set-user-defined-property.ts","ng://ngrx-forms/src/control/reducer/set-value.ts","ng://ngrx-forms/src/control/reducer/start-async-validation.ts","ng://ngrx-forms/src/control/reducer/unfocus.ts","ng://ngrx-forms/src/control/reducer.ts","ng://ngrx-forms/src/array/reducer/util.ts","ng://ngrx-forms/src/array/reducer/add-control.ts","ng://ngrx-forms/src/array/reducer/clear-async-error.ts","ng://ngrx-forms/src/array/reducer/disable.ts","ng://ngrx-forms/src/array/reducer/enable.ts","ng://ngrx-forms/src/array/reducer/mark-as-dirty.ts","ng://ngrx-forms/src/array/reducer/mark-as-pristine.ts","ng://ngrx-forms/src/array/reducer/mark-as-submitted.ts","ng://ngrx-forms/src/array/reducer/mark-as-touched.ts","ng://ngrx-forms/src/array/reducer/mark-as-unsubmitted.ts","ng://ngrx-forms/src/array/reducer/mark-as-untouched.ts","ng://ngrx-forms/src/array/reducer/move-control.ts","ng://ngrx-forms/src/array/reducer/remove-control.ts","ng://ngrx-forms/src/array/reducer/reset.ts","ng://ngrx-forms/src/array/reducer/set-async-error.ts","ng://ngrx-forms/src/array/reducer/set-errors.ts","ng://ngrx-forms/src/array/reducer/set-user-defined-property.ts","ng://ngrx-forms/src/array/reducer/set-value.ts","ng://ngrx-forms/src/array/reducer/start-async-validation.ts","ng://ngrx-forms/src/array/reducer/swap-control.ts","ng://ngrx-forms/src/array/reducer.ts","ng://ngrx-forms/src/reducer.ts","ng://ngrx-forms/src/group/reducer/util.ts","ng://ngrx-forms/src/group/reducer/add-control.ts","ng://ngrx-forms/src/group/reducer/clear-async-error.ts","ng://ngrx-forms/src/group/reducer/disable.ts","ng://ngrx-forms/src/group/reducer/enable.ts","ng://ngrx-forms/src/group/reducer/mark-as-dirty.ts","ng://ngrx-forms/src/group/reducer/mark-as-pristine.ts","ng://ngrx-forms/src/group/reducer/mark-as-submitted.ts","ng://ngrx-forms/src/group/reducer/mark-as-touched.ts","ng://ngrx-forms/src/group/reducer/mark-as-unsubmitted.ts","ng://ngrx-forms/src/group/reducer/mark-as-untouched.ts","ng://ngrx-forms/src/group/reducer/remove-control.ts","ng://ngrx-forms/src/group/reducer/reset.ts","ng://ngrx-forms/src/group/reducer/set-async-error.ts","ng://ngrx-forms/src/group/reducer/set-errors.ts","ng://ngrx-forms/src/group/reducer/set-user-defined-property.ts","ng://ngrx-forms/src/group/reducer/set-value.ts","ng://ngrx-forms/src/group/reducer/start-async-validation.ts","ng://ngrx-forms/src/group/reducer.ts","ng://ngrx-forms/src/update-function/util.ts","ng://ngrx-forms/src/update-function/update-array.ts","ng://ngrx-forms/src/update-function/update-group.ts","ng://ngrx-forms/src/update-function/update-recursive.ts","ng://ngrx-forms/src/update-function/set-value.ts","ng://ngrx-forms/src/update-function/set-errors.ts","ng://ngrx-forms/src/update-function/validate.ts","ng://ngrx-forms/src/update-function/enable.ts","ng://ngrx-forms/src/update-function/disable.ts","ng://ngrx-forms/src/update-function/mark-as-dirty.ts","ng://ngrx-forms/src/update-function/mark-as-pristine.ts","ng://ngrx-forms/src/update-function/mark-as-touched.ts","ng://ngrx-forms/src/update-function/mark-as-untouched.ts","ng://ngrx-forms/src/update-function/mark-as-submitted.ts","ng://ngrx-forms/src/update-function/mark-as-unsubmitted.ts","ng://ngrx-forms/src/update-function/focus.ts","ng://ngrx-forms/src/update-function/unfocus.ts","ng://ngrx-forms/src/update-function/add-array-control.ts","ng://ngrx-forms/src/update-function/add-group-control.ts","ng://ngrx-forms/src/update-function/remove-array-control.ts","ng://ngrx-forms/src/update-function/remove-group-control.ts","ng://ngrx-forms/src/update-function/set-user-defined-property.ts","ng://ngrx-forms/src/update-function/reset.ts","ng://ngrx-forms/src/update-function/start-async-validation.ts","ng://ngrx-forms/src/update-function/set-async-error.ts","ng://ngrx-forms/src/update-function/clear-async-error.ts","ng://ngrx-forms/src/view-adapter/view-adapter.ts","ng://ngrx-forms/src/view-adapter/checkbox.ts","ng://ngrx-forms/src/view-adapter/default.ts","ng://ngrx-forms/src/view-adapter/number.ts","ng://ngrx-forms/src/view-adapter/select.ts","ng://ngrx-forms/src/view-adapter/select-multiple.ts","ng://ngrx-forms/src/view-adapter/option.ts","ng://ngrx-forms/src/view-adapter/radio.ts","ng://ngrx-forms/src/view-adapter/range.ts","ng://ngrx-forms/src/view-adapter/util.ts","ng://ngrx-forms/src/control/value-converter.ts","ng://ngrx-forms/src/control/directive.ts","ng://ngrx-forms/src/control/local-state-directive.ts","ng://ngrx-forms/src/group/directive.ts","ng://ngrx-forms/src/group/local-state-directive.ts","ng://ngrx-forms/src/status-css-classes.directive.ts","ng://ngrx-forms/src/module.ts","ng://ngrx-forms/public_api.ts","ng://ngrx-forms/ngrx-forms.ts"],"sourcesContent":["import { Action } from '@ngrx/store';\nimport { KeyValue, NgrxFormControlId, ValidationErrors } from './state';\n\n// NOTE: the explicit type declaration for the `TYPE` properties is required\n// for the output declarations to properly use the literal string type instead\n// of just `string`\n\nexport class SetValueAction<TValue> implements Action {\n  static readonly TYPE: 'ngrx/forms/SET_VALUE' = 'ngrx/forms/SET_VALUE';\n  readonly type = SetValueAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly value: TValue,\n  ) { }\n}\n\nexport class SetErrorsAction implements Action {\n  static readonly TYPE: 'ngrx/forms/SET_ERRORS' = 'ngrx/forms/SET_ERRORS';\n  readonly type = SetErrorsAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly errors: ValidationErrors,\n  ) { }\n}\n\nexport class SetAsyncErrorAction implements Action {\n  static readonly TYPE: 'ngrx/forms/SET_ASYNC_ERROR' = 'ngrx/forms/SET_ASYNC_ERROR';\n  readonly type = SetAsyncErrorAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly name: string,\n    public readonly value: any,\n  ) { }\n}\n\nexport class ClearAsyncErrorAction implements Action {\n  static readonly TYPE: 'ngrx/forms/CLEAR_ASYNC_ERROR' = 'ngrx/forms/CLEAR_ASYNC_ERROR';\n  readonly type = ClearAsyncErrorAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly name: string,\n  ) { }\n}\n\nexport class StartAsyncValidationAction implements Action {\n  static readonly TYPE: 'ngrx/forms/START_ASYNC_VALIDATION' = 'ngrx/forms/START_ASYNC_VALIDATION';\n  readonly type = StartAsyncValidationAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly name: string,\n  ) { }\n}\n\nexport class MarkAsDirtyAction implements Action {\n  static readonly TYPE: 'ngrx/forms/MARK_AS_DIRTY' = 'ngrx/forms/MARK_AS_DIRTY';\n  readonly type = MarkAsDirtyAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class MarkAsPristineAction implements Action {\n  static readonly TYPE: 'ngrx/forms/MARK_AS_PRISTINE' = 'ngrx/forms/MARK_AS_PRISTINE';\n  readonly type = MarkAsPristineAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class EnableAction implements Action {\n  static readonly TYPE: 'ngrx/forms/ENABLE' = 'ngrx/forms/ENABLE';\n  readonly type = EnableAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class DisableAction implements Action {\n  static readonly TYPE: 'ngrx/forms/DISABLE' = 'ngrx/forms/DISABLE';\n  readonly type = DisableAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class MarkAsTouchedAction implements Action {\n  static readonly TYPE: 'ngrx/forms/MARK_AS_TOUCHED' = 'ngrx/forms/MARK_AS_TOUCHED';\n  readonly type = MarkAsTouchedAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class MarkAsUntouchedAction implements Action {\n  static readonly TYPE: 'ngrx/forms/MARK_AS_UNTOUCHED' = 'ngrx/forms/MARK_AS_UNTOUCHED';\n  readonly type = MarkAsUntouchedAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class FocusAction implements Action {\n  static readonly TYPE: 'ngrx/forms/FOCUS' = 'ngrx/forms/FOCUS';\n  readonly type = FocusAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class UnfocusAction implements Action {\n  static readonly TYPE: 'ngrx/forms/UNFOCUS' = 'ngrx/forms/UNFOCUS';\n  readonly type = UnfocusAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class MarkAsSubmittedAction implements Action {\n  static readonly TYPE: 'ngrx/forms/MARK_AS_SUBMITTED' = 'ngrx/forms/MARK_AS_SUBMITTED';\n  readonly type = MarkAsSubmittedAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class MarkAsUnsubmittedAction implements Action {\n  static readonly TYPE: 'ngrx/forms/MARK_AS_UNSUBMITTED' = 'ngrx/forms/MARK_AS_UNSUBMITTED';\n  readonly type = MarkAsUnsubmittedAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport class AddArrayControlAction<TValue> implements Action {\n  static readonly TYPE: 'ngrx/forms/ADD_ARRAY_CONTROL' = 'ngrx/forms/ADD_ARRAY_CONTROL';\n  readonly type = AddArrayControlAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly value: TValue,\n    public readonly index?: number,\n  ) { }\n}\n\nexport class AddGroupControlAction<TValue extends KeyValue, TControlKey extends keyof TValue = keyof TValue> implements Action {\n  static readonly TYPE: 'ngrx/forms/ADD_GROUP_CONTROL' = 'ngrx/forms/ADD_GROUP_CONTROL';\n  readonly type = AddGroupControlAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly name: keyof TValue,\n    public readonly value: TValue[TControlKey],\n  ) { }\n}\n\nexport class RemoveArrayControlAction implements Action {\n  static readonly TYPE: 'ngrx/forms/REMOVE_ARRAY_CONTROL' = 'ngrx/forms/REMOVE_ARRAY_CONTROL';\n  readonly type = RemoveArrayControlAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly index: number,\n  ) { }\n}\n\nexport class SwapArrayControlAction implements Action {\n  static readonly TYPE: 'ngrx/forms/SWAP_ARRAY_CONTROL' = 'ngrx/forms/SWAP_ARRAY_CONTROL';\n  readonly type = SwapArrayControlAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly fromIndex: number,\n    public readonly toIndex: number\n  ) { }\n}\n\nexport class MoveArrayControlAction implements Action {\n  static readonly TYPE: 'ngrx/forms/MOVE_ARRAY_CONTROL' = 'ngrx/forms/MOVE_ARRAY_CONTROL';\n  readonly type = MoveArrayControlAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly fromIndex: number,\n    public readonly toIndex: number\n  ) { }\n}\n\nexport class RemoveGroupControlAction<TValue> implements Action {\n  static readonly TYPE: 'ngrx/forms/REMOVE_CONTROL' = 'ngrx/forms/REMOVE_CONTROL';\n  readonly type = RemoveGroupControlAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly name: keyof TValue,\n  ) { }\n}\n\nexport class SetUserDefinedPropertyAction implements Action {\n  static readonly TYPE: 'ngrx/forms/SET_USER_DEFINED_PROPERTY' = 'ngrx/forms/SET_USER_DEFINED_PROPERTY';\n  readonly type = SetUserDefinedPropertyAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n    public readonly name: string,\n    public readonly value: any,\n  ) { }\n}\n\nexport class ResetAction implements Action {\n  static readonly TYPE: 'ngrx/forms/RESET' = 'ngrx/forms/RESET';\n  readonly type = ResetAction.TYPE;\n\n  constructor(\n    public readonly controlId: NgrxFormControlId,\n  ) { }\n}\n\nexport type Actions<TValue> =\n  | SetValueAction<TValue>\n  | SetErrorsAction\n  | SetAsyncErrorAction\n  | ClearAsyncErrorAction\n  | StartAsyncValidationAction\n  | MarkAsDirtyAction\n  | MarkAsPristineAction\n  | EnableAction\n  | DisableAction\n  | MarkAsTouchedAction\n  | MarkAsUntouchedAction\n  | FocusAction\n  | UnfocusAction\n  | MarkAsSubmittedAction\n  | MarkAsUnsubmittedAction\n  | AddGroupControlAction<TValue>\n  | RemoveGroupControlAction<TValue>\n  | AddArrayControlAction<any>\n  | RemoveArrayControlAction\n  | SetUserDefinedPropertyAction\n  | ResetAction\n  | SwapArrayControlAction\n  | MoveArrayControlAction\n  ;\n\nexport function isNgrxFormsAction(action: Action) {\n  return !!action.type && action.type.startsWith('ngrx/forms/');\n}\n\nexport const ALL_NGRX_FORMS_ACTION_TYPES: Actions<any>['type'][] = [\n  SetValueAction.TYPE,\n  SetErrorsAction.TYPE,\n  SetAsyncErrorAction.TYPE,\n  ClearAsyncErrorAction.TYPE,\n  StartAsyncValidationAction.TYPE,\n  MarkAsDirtyAction.TYPE,\n  MarkAsPristineAction.TYPE,\n  EnableAction.TYPE,\n  DisableAction.TYPE,\n  MarkAsTouchedAction.TYPE,\n  MarkAsUntouchedAction.TYPE,\n  FocusAction.TYPE,\n  UnfocusAction.TYPE,\n  MarkAsSubmittedAction.TYPE,\n  MarkAsUnsubmittedAction.TYPE,\n  AddGroupControlAction.TYPE,\n  RemoveGroupControlAction.TYPE,\n  AddArrayControlAction.TYPE,\n  RemoveArrayControlAction.TYPE,\n  SetUserDefinedPropertyAction.TYPE,\n  ResetAction.TYPE,\n  SwapArrayControlAction.TYPE,\n  MoveArrayControlAction.TYPE,\n];\n","export interface Boxed<T> {\n  __boxed: '';\n  value: T;\n}\n\nexport type UnboxedObject<T> = {\n  [prop in keyof T]: Unboxed<T[prop]>;\n};\n\nexport type Unboxed<T> =\n  // (ab)use 'symbol' to catch 'any' typing\n  T extends Boxed<symbol> ? any\n  : T extends Boxed<infer U> ? U\n  : T extends symbol[] ? any\n  : T extends symbol ? any\n  : T extends undefined ? undefined\n  : T extends null ? null\n  : T extends string ? string\n  : T extends number ? number\n  : T extends boolean ? boolean\n  : UnboxedObject<T>;\n\nexport function isBoxed<T = any>(value: any): value is Boxed<T> {\n  return !!value && (value as Boxed<any>).__boxed === '';\n}\n\nexport function box<T>(value: T): Boxed<T> {\n  return {\n    __boxed: '',\n    value,\n  };\n}\n\nexport function unbox<T>(value: T): Unboxed<T> {\n  if (['string', 'boolean', 'number', 'undefined'].indexOf(typeof value) >= 0 || value === null) {\n    return value as unknown as Unboxed<T>;\n  }\n\n  if (isBoxed<T>(value)) {\n    return value.value as unknown as Unboxed<T>;\n  }\n\n  if (Array.isArray(value)) {\n    return (value as any).map(unbox) as Unboxed<T>;\n  }\n\n  return Object.keys(value as any).reduce(\n    (a, k) => Object.assign(a, { [k]: unbox(value[k as keyof T] as any) }),\n    {} as any,\n  ) as Unboxed<T>;\n}\n","export function isEmpty(obj: object) {\n  return Object.keys(obj).length === 0;\n}\n\nexport function deepEquals<T>(_1: T, _2: T, ..._3: T[]) {\n  let i: any;\n  let l: any;\n  let leftChain: any;\n  let rightChain: any;\n\n  function compare2Objects(x: any, y: any) {\n    let p;\n\n    // remember that NaN === NaN returns false\n    // and isNaN(undefined) returns true\n    if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\n      return true;\n    }\n\n    // Compare primitives and functions.\n    // Check if both arguments link to the same object.\n    // Especially useful on the step where we compare prototypes\n    if (x === y) {\n      return true;\n    }\n\n    // Works in case when functions are created in constructor.\n    // Comparing dates is a common scenario. Another built-ins?\n    // We can even handle functions passed across iframes\n    if ((typeof x === 'function' && typeof y === 'function') ||\n      (x instanceof Date && y instanceof Date) ||\n      (x instanceof RegExp && y instanceof RegExp) ||\n      (x instanceof String && y instanceof String) ||\n      (x instanceof Number && y instanceof Number)) {\n      return x.toString() === y.toString();\n    }\n\n    // At last checking prototypes as good as we can\n    if (!(x instanceof Object && y instanceof Object)) {\n      return false;\n    }\n\n    if (x.isPrototypeOf(y) || y.isPrototypeOf(x)) {\n      return false;\n    }\n\n    if (x.constructor !== y.constructor) {\n      return false;\n    }\n\n    // Check for infinitive linking loops\n    if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1) {\n      return false;\n    }\n\n    // Quick checking of one object being a subset of another.\n    for (p in y) {\n      if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n        return false;\n      } else if (typeof y[p] !== typeof x[p]) {\n        return false;\n      }\n    }\n\n    // tslint:disable:forin\n    for (p in x) {\n      if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n        return false;\n      }\n\n      switch (typeof (x[p])) {\n        case 'object':\n        case 'function':\n\n          leftChain.push(x);\n          rightChain.push(y);\n\n          if (!compare2Objects(x[p], y[p])) {\n            return false;\n          }\n\n          leftChain.pop();\n          rightChain.pop();\n          break;\n\n        default:\n          if (x[p] !== y[p]) {\n            return false;\n          }\n          break;\n      }\n    }\n\n    return true;\n  }\n\n  if (arguments.length <= 1) {\n    throw new Error('Need two or more arguments to compare');\n  }\n\n  for (i = 1, l = arguments.length; i < l; i++) {\n    leftChain = [];\n    rightChain = [];\n\n    if (!compare2Objects(arguments[0], arguments[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","import { Boxed, isBoxed } from './boxing';\nimport { deepEquals, isEmpty } from './util';\n\nexport type FormControlValueTypes = Boxed<any> | string | number | boolean | null | undefined;\nexport type NgrxFormControlId = string;\n\n/**\n * This type represents a collection of named errors.\n */\nexport interface ValidationErrors { readonly [key: string]: any; }\nexport interface KeyValue { [key: string]: any; }\n\n/**\n * Base interface for all types of form states.\n */\nexport interface AbstractControlState<TValue> {\n  /**\n   * The unique ID of the form state. Usually this is the name or index\n   * of the control in the form value prefixed by the ID of the containing\n   * group or array, e.g. `MY_FORM.someTextInput` or `MY_FORM.0`.\n   */\n  readonly id: string;\n\n  /**\n   * The value of the form state.\n   */\n  readonly value: TValue;\n\n  /**\n   * This property is `true` if the state does not have any errors.\n   */\n  readonly isValid: boolean;\n\n  /**\n   * This property is `true` if the state has at least one error.\n   */\n  readonly isInvalid: boolean;\n\n  /**\n   * The errors of the state. This property always has a value.\n   * If the state has no errors the property is set to `{}`.\n   */\n  readonly errors: ValidationErrors;\n\n  /**\n   * The names of all asynchronous validations currently running\n   * for the state.\n   */\n  readonly pendingValidations: readonly string[];\n\n  /**\n   * This property indicates whether the control is currently being\n   * asynchronously validated.\n   */\n  readonly isValidationPending: boolean;\n\n  /**\n   * This property indicates whether the state is enabled. When it\n   * is `false` the `errors` are always `{}` (i.e. the state is\n   * always valid if disabled) and `pendingValidations` is always `[]`\n   * (i.e. all pending validations are cancelled).\n   */\n  readonly isEnabled: boolean;\n\n  /**\n   * This property indicates whether the state is disabled. When it\n   * is `true` the `errors` are always `{}` (i.e. the state is\n   * always valid if disabled) and `pendingValidations` is always `[]`\n   * (i.e. all pending validations are cancelled).\n   */\n  readonly isDisabled: boolean;\n\n  /**\n   * This property is set to `true` as soon as the state's value changes.\n   */\n  readonly isDirty: boolean;\n\n  /**\n   * This property is `true` as long as the state's value never changed.\n   */\n  readonly isPristine: boolean;\n\n  /**\n   * This property is set to `true` as soon as the state is touched.\n   */\n  readonly isTouched: boolean;\n\n  /**\n   * This property is `true` as long as the state is not touched.\n   */\n  readonly isUntouched: boolean;\n\n  /**\n   * This property is set to `true` as soon as the state is submitted.\n   */\n  readonly isSubmitted: boolean;\n\n  /**\n   * This property is `true` as long as the state is not submitted.\n   */\n  readonly isUnsubmitted: boolean;\n\n  /**\n   * This property is a container for user-defined metadata (e.g. if\n   * you wanted to count the number of times a state's value has been\n   * changed, what keys were pressed on an input, or how often a form\n   * has been submitted etc.). While it is possible to store this kind\n   * of information outside of **ngrx-forms** in your own state the\n   * `userDefinedProperties` allow you to store your own metadata\n   * directly in the state.\n   */\n  readonly userDefinedProperties: KeyValue;\n}\n\n/**\n * State associated with a form control, i.e. an HTML form\n * element in the view (e.g. `input`, `select`, `textarea` etc.).\n */\nexport interface FormControlState<TValue extends FormControlValueTypes> extends AbstractControlState<TValue> {\n  /**\n   * The value of the form state. Form controls only support values of\n   * type `string`, `number`, `boolean`, `null`, and `undefined` to\n   * keep the state string serializable.\n   */\n  readonly value: TValue;\n\n  /**\n   * This property is `true` if the form control does not have any errors.\n   */\n  readonly isValid: boolean;\n\n  /**\n   * This property is `true` if the form control has at least one error.\n   */\n  readonly isInvalid: boolean;\n\n  /**\n   * The errors of the form control. This property always has a value.\n   * If the control has no errors the property is set to `{}`.\n   */\n  readonly errors: ValidationErrors;\n\n  /**\n   * The names of all asynchronous validations currently running for the\n   * form control.\n   */\n  readonly pendingValidations: readonly string[];\n\n  /**\n   * This property indicates whether the control is currently being\n   * asynchronously validated (i.e. this is `true` if and only if\n   * `pendingValidations` is not empty).\n   */\n  readonly isValidationPending: boolean;\n\n  /**\n   * This property indicates whether the form control is enabled.\n   * When it is `false` the `errors` are always `{}` (i.e. the form\n   * control is always valid if disabled) and `pendingValidations`\n   * is always `[]` (i.e. all pending validations are cancelled).\n   */\n  readonly isEnabled: boolean;\n\n  /**\n   * This property indicates whether the form control is disabled.\n   * When it is `true` the `errors` are always `{}` (i.e. the form\n   * control is always valid if disabled) and `pendingValidations`\n   * is always `[]` (i.e. all pending validations are cancelled).\n   */\n  readonly isDisabled: boolean;\n\n  /**\n   * This property is set to `true` as soon as the underlying\n   * `FormViewAdapter` or `ControlValueAccessor` reports a new\n   * value for the first time.\n   */\n  readonly isDirty: boolean;\n\n  /**\n   * This property is `true` as long as the underlying\n   * `FormViewAdapter` or `ControlValueAccessor` has never\n   * reported a new value.\n   */\n  readonly isPristine: boolean;\n\n  /**\n   * This property is set to `true` based on the rules of the\n   * underlying `FormViewAdapter` (usually on `blur` for most form\n   * elements).\n   */\n  readonly isTouched: boolean;\n\n  /**\n   * This property is `true` as long as the control is not touched.\n   */\n  readonly isUntouched: boolean;\n\n  /**\n   * This property is set to `true` as soon as the group or array\n   * containing this form control is submitted. A form control can\n   * never be submitted on its own.\n   */\n  readonly isSubmitted: boolean;\n\n  /**\n   * This property is `true` as long as the state is not submitted.\n   */\n  readonly isUnsubmitted: boolean;\n\n  /**\n   * This property is set to `true` if the form control currently\n   * has focus. This feature is opt-in. To enable it you have to\n   * enable it for a given form element like this:\n   *\n```html\n<input [ngrxFormControlState]=\"state\"\n      [ngrxEnableFocusTracking]=\"true\" />\n```\n   */\n  readonly isFocused: boolean;\n\n  /**\n   * This property is `true` if the control currently does not have\n   * focus or focus tracking is not enabled for the form control.\n   */\n  readonly isUnfocused: boolean;\n}\n\n/**\n * This type represents the child control states of a form group.\n */\nexport type FormGroupControls<TValue> = {\n  readonly [controlId in keyof TValue]: FormState<TValue[controlId]>;\n};\n\n/**\n * Form groups are collections of named controls. Just like controls\n * groups are represented as plain state objects. The state of a\n * group is determined almost fully by its child states.\n */\nexport interface FormGroupState<TValue extends KeyValue> extends AbstractControlState<TValue> {\n  /**\n   * The aggregated value of the form group. The value is computed by\n   * aggregating the values of all children, e.g.\n   *\n```typescript\n{\n  child1: 'some value',\n  child2: {\n    nestedChild: 10,\n  },\n}\n```\n   */\n  readonly value: TValue;\n\n  /**\n   * This property is `true` if the form group does not have any errors\n   * itself and none of its children have any errors.\n   */\n  readonly isValid: boolean;\n\n  /**\n   * This property is `true` if the form group or any of its children\n   * have at least one error.\n   */\n  readonly isInvalid: boolean;\n\n  /**\n   * The errors of the form group. This property is computed by merging\n   * the errors of the group with the errors of all its children where\n   * the child errors are a property of the `errors` object prefixed with\n   * an underscore, e.g.\n   *\n```\n{\n  groupError: true,\n  _child: {\n    childError: true,\n  },\n}\n```\n   *\n   * If neither the group nor any children have errors the property is\n   * set to `{}`.\n   */\n  readonly errors: ValidationErrors;\n\n  /**\n   * The names of all asynchronous validations currently running for the\n   * form group.\n   */\n  readonly pendingValidations: readonly string[];\n\n  /**\n   * This property indicates whether the group or any of its children\n   * are currently being asynchronously validated.\n   */\n  readonly isValidationPending: boolean;\n\n  /**\n   * This property indicates whether the form group is enabled. It is\n   * `true` if and only if at least one of its child states is\n   * enabled. When it is `false` the `errors` are always `{}` (i.e.\n   * the form group is always valid if disabled) and `pendingValidations`\n   * is always `[]` (i.e. all pending validations are cancelled).\n   */\n  readonly isEnabled: boolean;\n\n  /**\n   * This property indicates whether the form group is disabled. It is\n   * `true` if and only if all of its child state are disabled. When\n   * it is `true` the `errors` are always `{}` (i.e. the form group\n   * is always valid if disabled) and `pendingValidations` is always\n   * `[]` (i.e. all pending validations are cancelled).\n   */\n  readonly isDisabled: boolean;\n\n  /**\n   * This property is `true` if and only if at least one of the form\n   * group's child states is marked as dirty.\n   */\n  readonly isDirty: boolean;\n\n  /**\n   * This property is `true` if and only if all of the form group's\n   * child states are pristine.\n   */\n  readonly isPristine: boolean;\n\n  /**\n   * This property is `true` if and only if at least one of the form\n   * group's child states is marked as touched.\n   */\n  readonly isTouched: boolean;\n\n  /**\n   * This property is `true` if and only if all of the form group's\n   * child states are untouched.\n   */\n  readonly isUntouched: boolean;\n\n  /**\n   * This property is set to `true` as soon as the form group is\n   * submitted. This is tracked by the `NgrxFormDirective`, which\n   * needs to be applied to a form like this:\n   *\n```html\n<form [ngrxFormState]=\"groupState\">\n</form>\n```\n   *\n   * Note that applying this directive to a form prevents normal form\n   * submission since that does not make much sense for ngrx forms.\n   */\n  readonly isSubmitted: boolean;\n\n  /**\n   * This property is `true` as long as the state is not submitted.\n   */\n  readonly isUnsubmitted: boolean;\n\n  /**\n   * This property contains all child states of the form group. As\n   * you may have noticed the type of each child state is\n   * `AbstractControlState` which sometimes forces you to cast the\n   * state explicitly. It is not possible to improve this typing\n   * until [conditional mapped types](https://github.com/Microsoft/TypeScript/issues/12424)\n   * are added to TypeScript.\n   */\n  readonly controls: FormGroupControls<TValue>;\n}\n\n/**\n * Form arrays are collections of controls. They are represented as\n * plain state arrays. The state of an array is determined almost\n * fully by its child states.\n */\nexport interface FormArrayState<TValue> extends AbstractControlState<readonly TValue[]> {\n  /**\n   * The aggregated value of the form array. The value is computed by\n   * aggregating the values of all children into an array.\n   */\n  readonly value: TValue[];\n\n  /**\n   * This property is `true` if the form array does not have any errors\n   * itself and none of its children have any errors.\n   */\n  readonly isValid: boolean;\n\n  /**\n   * This property is `true` if the form array or any of its children\n   * have at least one error.\n   */\n  readonly isInvalid: boolean;\n\n  /**\n   * The errors of the form array. This property is computed by merging\n   * the errors of the array with the errors of all its children where\n   * the child errors are a property of the `errors` object prefixed with\n   * an underscore, e.g.\n   *\n```\n{\n  arrayError: true,\n  _0: {\n    childError: true,\n  },\n}\n```\n   *\n   * If neither the array nor any children have errors the property is\n   * set to `{}`.\n   */\n  readonly errors: ValidationErrors;\n\n  /**\n   * The names of all asynchronous validations currently running for the\n   * form array.\n   */\n  readonly pendingValidations: readonly string[];\n\n  /**\n   * This property indicates whether the array or any of its children\n   * are currently being asynchronously validated.\n   */\n  readonly isValidationPending: boolean;\n\n  /**\n   * This property indicates whether the form array is enabled. It is\n   * `true` if and only if at least one of its child states is\n   * enabled. When it is `false` the `errors` are always `{}` (i.e.\n   * the form array is always valid if disabled) and `pendingValidations`\n   * is always `[]` (i.e. all pending validations are cancelled).\n   */\n  readonly isEnabled: boolean;\n\n  /**\n   * This property indicates whether the form array is disabled. It is\n   * `true` if and only if all of its child states are disabled. When\n   * it is `true` the `errors` are always `{}` (i.e. the form array\n   * is always valid if disabled) and `pendingValidations` is always\n   * `[]` (i.e. all pending validations are cancelled).\n   */\n  readonly isDisabled: boolean;\n\n  /**\n   * This property is `true` if and only if at least one of the form\n   * array's child states is marked as dirty.\n   */\n  readonly isDirty: boolean;\n\n  /**\n   * This property is `true` if and only if all of the form array's\n   * child states are pristine.\n   */\n  readonly isPristine: boolean;\n\n  /**\n   * This property is `true` if and only if at least one of the form\n   * array's child states is marked as touched.\n   */\n  readonly isTouched: boolean;\n\n  /**\n   * This property is `true` if and only if all of the form array's\n   * child states are untouched.\n   */\n  readonly isUntouched: boolean;\n\n  /**\n   * This property is set to `true` as soon as the form array is\n   * submitted. This is tracked by the `NgrxFormDirective`, which\n   * needs to be applied to a form like this:\n   *\n```html\n<form [ngrxFormState]=\"arrayState\">\n</form>\n```\n   *\n   * Note that applying this directive to a form prevents normal form\n   * submission since that does not make much sense for ngrx forms.\n   */\n  readonly isSubmitted: boolean;\n\n  /**\n   * This property is `true` as long as the state is not submitted.\n   */\n  readonly isUnsubmitted: boolean;\n\n  /**\n   * This property contains all child states of the form array. As\n   * you may have noticed the type of each child state is\n   * `AbstractControlState` which sometimes forces you to cast the\n   * state explicitly. It is not possible to improve this typing\n   * until [conditional mapped types](https://github.com/Microsoft/TypeScript/issues/12424)\n   * are added to TypeScript.\n   */\n  readonly controls: readonly FormState<TValue>[];\n}\n\n/**\n * This is a helper type that allows working around the distributiveness\n * of conditional types.\n */\nexport interface InferenceWrapper<T> {\n  t: T;\n}\n\n/**\n * This is a helper type that infers the correct form state type based\n * on the boxed type contained in the inference wrapper.\n */\nexport type InferredBoxedFormState<T extends InferenceWrapper<any>> =\n  T extends InferenceWrapper<Boxed<infer U>> ? FormControlState<Boxed<U>>\n  : T extends InferenceWrapper<Boxed<infer U> | undefined> ? FormControlState<Boxed<U> | undefined>\n  : T extends InferenceWrapper<Boxed<infer U> | null> ? FormControlState<Boxed<U> | null>\n  : T extends InferenceWrapper<Boxed<infer U> | undefined | null> ? FormControlState<Boxed<U> | undefined | null>\n  : never\n  ;\n\n/**\n * This is a helper type that infers the correct form state type based\n * on the string type contained in the inference wrapper.\n */\nexport type InferredStringFormState<T extends InferenceWrapper<any>> =\n  T extends InferenceWrapper<string> ? FormControlState<string>\n  : T extends InferenceWrapper<string | undefined> ? FormControlState<string | undefined>\n  : T extends InferenceWrapper<string | null> ? FormControlState<string | null>\n  : T extends InferenceWrapper<string | undefined | null> ? FormControlState<string | undefined | null>\n  : never\n  ;\n\n/**\n * This is a helper type that infers the correct form state type based\n * on the number type contained in the inference wrapper.\n */\nexport type InferredNumberFormState<T extends InferenceWrapper<any>> =\n  T extends InferenceWrapper<number> ? FormControlState<number>\n  : T extends InferenceWrapper<number | undefined> ? FormControlState<number | undefined>\n  : T extends InferenceWrapper<number | null> ? FormControlState<number | null>\n  : T extends InferenceWrapper<number | undefined | null> ? FormControlState<number | undefined | null>\n  : never\n  ;\n\n/**\n * This is a helper type that infers the correct form state type based\n * on the boolean type contained in the inference wrapper.\n */\nexport type InferredBooleanFormState<T extends InferenceWrapper<any>> =\n  T extends InferenceWrapper<boolean> ? FormControlState<boolean>\n  : T extends InferenceWrapper<boolean | undefined> ? FormControlState<boolean | undefined>\n  : T extends InferenceWrapper<boolean | null> ? FormControlState<boolean | null>\n  : T extends InferenceWrapper<boolean | undefined | null> ? FormControlState<boolean | undefined | null>\n  : never\n  ;\n\n/**\n * This is a helper type that infers the correct form state type based\n * on the type contained in the inference wrapper.\n */\nexport type InferredFormState<T extends InferenceWrapper<any>> =\n  // (ab)use 'symbol' to catch 'any' typing\n  T extends InferenceWrapper<symbol> ? AbstractControlState<any>\n  : T extends InferenceWrapper<undefined> ? AbstractControlState<any>\n  : T extends InferenceWrapper<null> ? AbstractControlState<any>\n\n  // control\n  : T extends InferenceWrapper<Boxed<any> | undefined | null> ? InferredBoxedFormState<T>\n  : T extends InferenceWrapper<string | undefined | null> ? InferredStringFormState<T>\n  : T extends InferenceWrapper<number | undefined | null> ? InferredNumberFormState<T>\n  : T extends InferenceWrapper<boolean | undefined | null> ? InferredBooleanFormState<T>\n\n  // array\n  : T extends InferenceWrapper<readonly (infer U)[] | undefined | null> ? FormArrayState<U>\n\n  // group\n  : T extends InferenceWrapper<infer U | undefined | null> ? FormGroupState<U>\n\n  // fallback type (this case should never (no pun intended) be hit)\n  : never\n  ;\n\n/**\n * This is a type that can infer the concrete type of a form state based\n * on the given type parameter.\n */\nexport type FormState<T> = InferredFormState<InferenceWrapper<T>>;\n\n/**\n * This function determines if a value is a form state.\n */\nexport function isFormState<TValue = any>(state: any): state is FormState<TValue> {\n  return !!state && state.hasOwnProperty('id') && state.hasOwnProperty('value') && state.hasOwnProperty('errors');\n}\n\n/**\n * This function determines if a value is an array state.\n */\nexport function isArrayState<TValue = any>(state: any): state is FormArrayState<TValue> {\n  return isFormState(state) && state.hasOwnProperty('controls') && Array.isArray((state as any).controls);\n}\n\n/**\n * This function determines if a value is a group state.\n */\nexport function isGroupState<TValue = any>(state: any): state is FormGroupState<TValue> {\n  return isFormState(state) && state.hasOwnProperty('controls') && !Array.isArray((state as any).controls) && typeof (state as any).controls !== 'function';\n}\n\nexport function createChildState<TValue>(id: string, childValue: TValue): FormState<TValue> {\n  if (isBoxed(childValue)) {\n    return createFormControlState<any>(id, childValue) as FormState<TValue>;\n  }\n\n  if (childValue !== null && Array.isArray(childValue)) {\n    return createFormArrayState(id, childValue) as FormState<TValue>;\n  }\n\n  if (childValue !== null && typeof childValue === 'object') {\n    return createFormGroupState(id, childValue) as FormState<TValue>;\n  }\n\n  return createFormControlState<any>(id, childValue) as FormState<TValue>;\n}\n\nexport function verifyFormControlValueIsValid<TValue>(value: TValue) {\n  if (value === null || ['string', 'number', 'boolean', 'undefined'].indexOf(typeof value) >= 0) {\n    return value;\n  }\n\n  if (!isBoxed(value)) {\n    const errorMsg = 'Form control states only support undefined, null, string, number, and boolean values as well as boxed values';\n    throw new Error(`${errorMsg}; got ${JSON.stringify(value)} of type ${typeof value}`); // `;\n  }\n\n  if (value.value === null || ['string', 'number', 'boolean', 'undefined'].indexOf(typeof value.value) >= 0) {\n    return value;\n  }\n\n  const serialized = JSON.stringify(value);\n  const deserialized = JSON.parse(serialized);\n\n  if (deepEquals(value, deserialized)) {\n    return value;\n  }\n\n  throw new Error(`A form control value must be serializable (i.e. value === JSON.parse(JSON.stringify(value))), got: ${JSON.stringify(value)}`);\n}\n\n/**\n * This function creates a form control state with an ID and a value.\n */\nexport function createFormControlState<TValue extends FormControlValueTypes>(\n  id: NgrxFormControlId,\n  value: TValue,\n): FormControlState<TValue> {\n  return {\n    id,\n    value: verifyFormControlValueIsValid(value),\n    errors: {},\n    pendingValidations: [],\n    isValidationPending: false,\n    isValid: true,\n    isInvalid: false,\n    isEnabled: true,\n    isDisabled: false,\n    isDirty: false,\n    isPristine: true,\n    isTouched: false,\n    isUntouched: true,\n    isSubmitted: false,\n    isUnsubmitted: true,\n    isFocused: false,\n    isUnfocused: true,\n    userDefinedProperties: {},\n  };\n}\n\nexport function getFormGroupValue<TValue extends KeyValue>(\n  controls: FormGroupControls<TValue>,\n  originalValue: TValue,\n): TValue {\n  let hasChanged = Object.keys(originalValue).length !== Object.keys(controls).length;\n  const newValue = Object.keys(controls).reduce((res, key: keyof TValue) => {\n    hasChanged = hasChanged || originalValue[key] !== controls[key].value;\n    res[key] = controls[key].value;\n    return res;\n  }, {} as TValue);\n\n  return hasChanged ? newValue : originalValue;\n}\n\nexport function getFormGroupErrors<TValue extends KeyValue>(\n  controls: FormGroupControls<TValue>,\n  originalErrors: ValidationErrors,\n): ValidationErrors {\n  let hasChanged = false;\n  const groupErrors =\n    Object.keys(originalErrors)\n      .filter(key => !key.startsWith('_'))\n      .reduce((res, key) => Object.assign(res, { [key]: originalErrors[key] }), {} as ValidationErrors);\n\n  const newErrors = Object.keys(controls).reduce((res, key: any) => {\n    const controlErrors = controls[key].errors;\n    if (!isEmpty(controlErrors)) {\n      hasChanged = hasChanged || originalErrors[`_${key}`] !== controlErrors;\n      Object.assign(res, { [`_${key}`]: controls[key].errors });\n    } else {\n      hasChanged = hasChanged || originalErrors.hasOwnProperty(`_${key}`);\n    }\n\n    return res;\n  }, groupErrors);\n\n  hasChanged = hasChanged || Object.keys(originalErrors).length !== Object.keys(newErrors).length;\n\n  return hasChanged ? newErrors : originalErrors;\n}\n\nexport function computeGroupState<TValue extends KeyValue>(\n  id: string,\n  controls: FormGroupControls<TValue>,\n  value: TValue,\n  errors: ValidationErrors,\n  pendingValidations: readonly string[],\n  userDefinedProperties: KeyValue,\n  flags: {\n    wasOrShouldBeDirty?: boolean;\n    wasOrShouldBeEnabled?: boolean;\n    wasOrShouldBeTouched?: boolean;\n    wasOrShouldBeSubmitted?: boolean;\n  },\n): FormGroupState<TValue> {\n  value = getFormGroupValue<TValue>(controls, value);\n  errors = getFormGroupErrors(controls, errors);\n  const isValid = isEmpty(errors);\n  const isDirty = flags.wasOrShouldBeDirty || Object.keys(controls).some(key => controls[key].isDirty);\n  const isEnabled = flags.wasOrShouldBeEnabled || Object.keys(controls).some(key => controls[key].isEnabled);\n  const isTouched = flags.wasOrShouldBeTouched || Object.keys(controls).some(key => controls[key].isTouched);\n  const isSubmitted = flags.wasOrShouldBeSubmitted || Object.keys(controls).some(key => controls[key].isSubmitted);\n  const isValidationPending = pendingValidations.length > 0 || Object.keys(controls).some(key => controls[key].isValidationPending);\n  return {\n    id,\n    value,\n    errors,\n    pendingValidations,\n    isValidationPending,\n    isValid,\n    isInvalid: !isValid,\n    isEnabled,\n    isDisabled: !isEnabled,\n    isDirty,\n    isPristine: !isDirty,\n    isTouched,\n    isUntouched: !isTouched,\n    isSubmitted,\n    isUnsubmitted: !isSubmitted,\n    userDefinedProperties,\n    controls,\n  };\n}\n\n/**\n * This function creates a form group state with an ID and a value.\n * From the value the shape of the group state is inferred, i.e.\n * object properties are inferred as form groups, array properties\n * are inferred as form arrays, and primitive properties are inferred\n * as form controls.\n */\nexport function createFormGroupState<TValue extends KeyValue>(\n  id: NgrxFormControlId,\n  initialValue: TValue,\n): FormGroupState<TValue> {\n  const controls = Object.keys(initialValue)\n    .map((key: keyof TValue) => [key, createChildState(`${id}.${key}`, initialValue[key])] as [string, FormState<any>])\n    .reduce((res, [controlId, state]) => Object.assign(res, { [controlId]: state }), {} as FormGroupControls<TValue>);\n\n  return computeGroupState(id, controls, initialValue, {}, [], {}, { wasOrShouldBeEnabled: true });\n}\n\nfunction getFormArrayValue<TValue>(\n  controls: readonly AbstractControlState<TValue>[],\n  originalValue: TValue[],\n): TValue[] {\n  let hasChanged = Object.keys(originalValue).length !== Object.keys(controls).length;\n  const newValue = controls.map((state, i) => {\n    hasChanged = hasChanged || originalValue[i] !== state.value;\n    return state.value;\n  });\n\n  return hasChanged ? newValue : originalValue;\n}\n\nfunction getFormArrayErrors<TValue>(\n  controls: readonly AbstractControlState<TValue>[],\n  originalErrors: ValidationErrors,\n): ValidationErrors {\n  let hasChanged = false;\n  const groupErrors =\n    Object.keys(originalErrors)\n      .filter(key => !key.startsWith('_'))\n      .reduce((res, key) => Object.assign(res, { [key]: originalErrors[key] }), {} as ValidationErrors);\n\n  const newErrors = controls.reduce((res, state, i) => {\n    const controlErrors = state.errors;\n    if (!isEmpty(controlErrors)) {\n      hasChanged = hasChanged || originalErrors[`_${i}`] !== controlErrors;\n      Object.assign(res, { [`_${i}`]: controlErrors });\n    } else {\n      hasChanged = hasChanged || originalErrors.hasOwnProperty(`_${i}`);\n    }\n\n    return res;\n  }, groupErrors);\n\n  hasChanged = hasChanged || Object.keys(originalErrors).length !== Object.keys(newErrors).length;\n\n  return hasChanged ? newErrors : originalErrors;\n}\n\nexport function computeArrayState<TValue>(\n  id: string,\n  inferredControls: readonly FormState<TValue>[],\n  value: TValue[],\n  errors: ValidationErrors,\n  pendingValidations: readonly string[],\n  userDefinedProperties: KeyValue,\n  flags: {\n    wasOrShouldBeDirty?: boolean;\n    wasOrShouldBeEnabled?: boolean;\n    wasOrShouldBeTouched?: boolean;\n    wasOrShouldBeSubmitted?: boolean;\n  },\n): FormArrayState<TValue> {\n  const controls = inferredControls as readonly AbstractControlState<any>[];\n\n  value = getFormArrayValue<TValue>(controls, value);\n  errors = getFormArrayErrors(controls, errors);\n  const isValid = isEmpty(errors);\n  const isDirty = flags.wasOrShouldBeDirty || controls.some(state => state.isDirty);\n  const isEnabled = flags.wasOrShouldBeEnabled || controls.some(state => state.isEnabled);\n  const isTouched = flags.wasOrShouldBeTouched || controls.some(state => state.isTouched);\n  const isSubmitted = flags.wasOrShouldBeSubmitted || controls.some(state => state.isSubmitted);\n  const isValidationPending = pendingValidations.length > 0 || controls.some(state => state.isValidationPending);\n  return {\n    id,\n    value,\n    errors,\n    pendingValidations,\n    isValidationPending,\n    isValid,\n    isInvalid: !isValid,\n    isEnabled,\n    isDisabled: !isEnabled,\n    isDirty,\n    isPristine: !isDirty,\n    isTouched,\n    isUntouched: !isTouched,\n    isSubmitted,\n    isUnsubmitted: !isSubmitted,\n    userDefinedProperties,\n    controls: inferredControls,\n  };\n}\n\n/**\n * This function creates a form array state with an ID and a value.\n * From the value the shape of the array state is inferred, i.e.\n * object values are inferred as form groups, array values\n * are inferred as form arrays, and primitive values are inferred\n * as form controls.\n */\nexport function createFormArrayState<TValue>(\n  id: NgrxFormControlId,\n  initialValue: TValue[],\n): FormArrayState<TValue> {\n  const controls = initialValue\n    .map((value, i) => createChildState(`${id}.${i}`, value));\n\n  return computeArrayState(id, controls, initialValue, {}, [], {}, { wasOrShouldBeEnabled: true });\n}\n","import { Actions, ClearAsyncErrorAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\nimport { isEmpty } from '../../util';\n\nexport function clearAsyncErrorReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== ClearAsyncErrorAction.TYPE) {\n    return state;\n  }\n\n  const name = `$${action.name}`;\n\n  let errors = state.errors;\n\n  if (errors.hasOwnProperty(name)) {\n    errors = { ...state.errors };\n    delete (errors as any)[name];\n  }\n\n  const pendingValidations = state.pendingValidations.filter(v => v !== action.name);\n  const isValid = isEmpty(errors);\n\n  if (errors === state.errors && isValid === state.isValid && pendingValidations.length === state.pendingValidations.length) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isValid,\n    isInvalid: !isValid,\n    errors,\n    pendingValidations,\n    isValidationPending: pendingValidations.length > 0,\n  };\n}\n","import { Actions, DisableAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function disableReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== DisableAction.TYPE) {\n    return state;\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isEnabled: false,\n    isDisabled: true,\n    isValid: true,\n    isInvalid: false,\n    errors: {},\n    pendingValidations: [],\n    isValidationPending: false,\n  };\n}\n","import { Actions, EnableAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function enableReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== EnableAction.TYPE) {\n    return state;\n  }\n\n  if (state.isEnabled) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isEnabled: true,\n    isDisabled: false,\n  };\n}\n","import { Actions, FocusAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function focusReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== FocusAction.TYPE) {\n    return state;\n  }\n\n  if (state.isFocused) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isFocused: true,\n    isUnfocused: false,\n  };\n}\n","import { Actions, MarkAsDirtyAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function markAsDirtyReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== MarkAsDirtyAction.TYPE) {\n    return state;\n  }\n\n  if (state.isDirty) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isDirty: true,\n    isPristine: false,\n  };\n}\n","import { Actions, MarkAsPristineAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function markAsPristineReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== MarkAsPristineAction.TYPE) {\n    return state;\n  }\n\n  if (state.isPristine) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isDirty: false,\n    isPristine: true,\n  };\n}\n","import { Actions, MarkAsSubmittedAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function markAsSubmittedReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== MarkAsSubmittedAction.TYPE) {\n    return state;\n  }\n\n  if (state.isSubmitted) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isSubmitted: true,\n    isUnsubmitted: false,\n  };\n}\n","import { Actions, MarkAsTouchedAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function markAsTouchedReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== MarkAsTouchedAction.TYPE) {\n    return state;\n  }\n\n  if (state.isTouched) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isTouched: true,\n    isUntouched: false,\n  };\n}\n","import { Actions, MarkAsUnsubmittedAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function markAsUnsubmittedReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== MarkAsUnsubmittedAction.TYPE) {\n    return state;\n  }\n\n  if (state.isUnsubmitted) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isSubmitted: false,\n    isUnsubmitted: true,\n  };\n}\n","import { Actions, MarkAsUntouchedAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function markAsUntouchedReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== MarkAsUntouchedAction.TYPE) {\n    return state;\n  }\n\n  if (state.isUntouched) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isTouched: false,\n    isUntouched: true,\n  };\n}\n","import { Actions, ResetAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function resetReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== ResetAction.TYPE) {\n    return state;\n  }\n\n  if (state.isPristine && state.isUntouched && state.isUnsubmitted) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isDirty: false,\n    isPristine: true,\n    isTouched: false,\n    isUntouched: true,\n    isSubmitted: false,\n    isUnsubmitted: true,\n  };\n}\n","import { Actions, SetAsyncErrorAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\nimport { deepEquals } from '../../util';\n\nexport function setAsyncErrorReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== SetAsyncErrorAction.TYPE) {\n    return state;\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  const name = `$${action.name}`;\n  let value = action.value;\n\n  if (deepEquals(state.errors[name], action.value)) {\n    value = state.errors[name];\n  }\n\n  const errors = { ...state.errors, [name]: value };\n  const pendingValidations = state.pendingValidations.filter(v => v !== action.name);\n\n  return {\n    ...state,\n    isValid: false,\n    isInvalid: true,\n    errors,\n    pendingValidations,\n    isValidationPending: pendingValidations.length > 0,\n  };\n}\n","import { Actions, SetErrorsAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes, ValidationErrors } from '../../state';\nimport { deepEquals, isEmpty } from '../../util';\n\nexport function setErrorsReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== SetErrorsAction.TYPE) {\n    return state;\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  if (state.errors === action.errors) {\n    return state;\n  }\n\n  if (deepEquals(state.errors, action.errors)) {\n    return state;\n  }\n\n  if (!action.errors || typeof (action.errors as any) !== 'object' || Array.isArray(action.errors)) {\n    throw new Error(`Control errors must be an object; got ${action.errors}`); // `;\n  }\n\n  if (Object.keys(action.errors).some(key => key.startsWith('$'))) {\n    throw new Error(`Control errors must not use $ as a prefix; got ${JSON.stringify(action.errors)}`); // `;\n  }\n\n  const asyncErrors =\n    Object.keys(state.errors)\n      .filter(key => key.startsWith('$'))\n      .reduce((res, key) => Object.assign(res, { [key]: state.errors[key] }), {} as ValidationErrors);\n\n  const newErrors = isEmpty(asyncErrors) ? action.errors : Object.assign(asyncErrors, action.errors);\n  const isValid = isEmpty(newErrors);\n\n  return {\n    ...state,\n    isValid,\n    isInvalid: !isValid,\n    errors: newErrors,\n  };\n}\n","import { Actions, SetUserDefinedPropertyAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function setUserDefinedPropertyReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== SetUserDefinedPropertyAction.TYPE) {\n    return state;\n  }\n\n  if (state.userDefinedProperties[action.name] === action.value) {\n    return state;\n  }\n\n  return {\n    ...state,\n    userDefinedProperties: {\n      ...state.userDefinedProperties,\n      [action.name]: action.value,\n    },\n  };\n}\n","import { Actions, SetValueAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes, verifyFormControlValueIsValid } from '../../state';\n\nexport function setValueReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== SetValueAction.TYPE) {\n    return state;\n  }\n\n  if (state.value === action.value) {\n    return state;\n  }\n\n  return {\n    ...state,\n    value: verifyFormControlValueIsValid(action.value),\n  };\n}\n","import { Actions, StartAsyncValidationAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function startAsyncValidationReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== StartAsyncValidationAction.TYPE) {\n    return state;\n  }\n\n  if (state.pendingValidations.indexOf(action.name) >= 0) {\n    return state;\n  }\n\n  return {\n    ...state,\n    pendingValidations: [...state.pendingValidations, action.name],\n    isValidationPending: true,\n  };\n}\n","import { Actions, UnfocusAction } from '../../actions';\nimport { FormControlState, FormControlValueTypes } from '../../state';\n\nexport function unfocusReducer<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (action.type !== UnfocusAction.TYPE) {\n    return state;\n  }\n\n  if (state.isUnfocused) {\n    return state;\n  }\n\n  return {\n    ...state,\n    isFocused: false,\n    isUnfocused: true,\n  };\n}\n","import { Action } from '@ngrx/store';\n\nimport { Actions } from '../actions';\nimport { FormControlState, FormControlValueTypes, isArrayState, isGroupState } from '../state';\nimport { clearAsyncErrorReducer } from './reducer/clear-async-error';\nimport { disableReducer } from './reducer/disable';\nimport { enableReducer } from './reducer/enable';\nimport { focusReducer } from './reducer/focus';\nimport { markAsDirtyReducer } from './reducer/mark-as-dirty';\nimport { markAsPristineReducer } from './reducer/mark-as-pristine';\nimport { markAsSubmittedReducer } from './reducer/mark-as-submitted';\nimport { markAsTouchedReducer } from './reducer/mark-as-touched';\nimport { markAsUnsubmittedReducer } from './reducer/mark-as-unsubmitted';\nimport { markAsUntouchedReducer } from './reducer/mark-as-untouched';\nimport { resetReducer } from './reducer/reset';\nimport { setAsyncErrorReducer } from './reducer/set-async-error';\nimport { setErrorsReducer } from './reducer/set-errors';\nimport { setUserDefinedPropertyReducer } from './reducer/set-user-defined-property';\nimport { setValueReducer } from './reducer/set-value';\nimport { startAsyncValidationReducer } from './reducer/start-async-validation';\nimport { unfocusReducer } from './reducer/unfocus';\n\nexport function formControlReducerInternal<TValue extends FormControlValueTypes>(\n  state: FormControlState<TValue>,\n  action: Actions<TValue>,\n): FormControlState<TValue> {\n  if (isGroupState(state) || isArrayState(state)) {\n    throw new Error('The state must be a control state');\n  }\n\n  if (action.controlId !== state.id) {\n    return state;\n  }\n\n  state = setValueReducer(state, action);\n  state = setErrorsReducer(state, action);\n  state = startAsyncValidationReducer(state, action);\n  state = setAsyncErrorReducer(state, action);\n  state = clearAsyncErrorReducer(state, action);\n  state = enableReducer(state, action);\n  state = disableReducer(state, action);\n  state = focusReducer(state, action);\n  state = unfocusReducer(state, action);\n  state = markAsDirtyReducer(state, action);\n  state = markAsPristineReducer(state, action);\n  state = markAsTouchedReducer(state, action);\n  state = markAsUntouchedReducer(state, action);\n  state = markAsSubmittedReducer(state, action);\n  state = markAsUnsubmittedReducer(state, action);\n  state = setUserDefinedPropertyReducer(state, action);\n  state = resetReducer(state, action);\n\n  return state;\n}\n\n/**\n * This reducer function updates a form control state with actions.\n */\nexport function formControlReducer<TValue extends FormControlValueTypes>(state: FormControlState<TValue> | undefined, action: Action) {\n  if (!state) {\n    throw new Error('The control state must be defined!');\n  }\n\n  return formControlReducerInternal(state, action as any);\n}\n","import { Actions } from '../../actions';\nimport { formStateReducer } from '../../reducer';\nimport { computeArrayState, FormArrayState, FormGroupControls, FormGroupState, FormState, isArrayState, isGroupState } from '../../state';\n\nexport function dispatchActionPerChild<TValue>(\n  controls: readonly FormState<TValue>[],\n  actionCreator: (controlId: string) => Actions<TValue>,\n): readonly FormState<TValue>[] {\n  let hasChanged = false;\n  const newControls = controls\n    .map(state => {\n      const newState = formStateReducer<TValue>(state, actionCreator(state.id));\n      hasChanged = hasChanged || state !== newState;\n      return newState;\n    });\n\n  return hasChanged ? newControls : controls;\n}\n\nfunction callChildReducers<TValue>(\n  controls: readonly FormState<TValue>[],\n  action: Actions<TValue[]>,\n): readonly FormState<TValue>[] {\n  let hasChanged = false;\n  const newControls = controls\n    .map(state => {\n      const newState = formStateReducer<TValue>(state, action);\n      hasChanged = hasChanged || state !== newState;\n      return newState;\n    });\n\n  return hasChanged ? newControls : controls;\n}\n\nexport function childReducer<TValue>(state: FormArrayState<TValue>, action: Actions<TValue[]>) {\n  const controls = callChildReducers(state.controls, action);\n\n  if (state.controls === controls) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n\nexport function updateIdRecursiveForGroup<TValue>(state: FormGroupState<TValue>, newId: string): FormGroupState<TValue> {\n  const controls: FormGroupControls<TValue> =\n    Object.keys(state.controls)\n      .reduce((agg, key) => Object.assign(agg, {\n        [key]: updateIdRecursive<TValue[keyof TValue]>(state.controls[key as keyof TValue], `${newId}.${key}`),\n      }), {} as FormGroupControls<TValue>);\n\n  return {\n    ...state,\n    id: newId,\n    controls,\n  };\n}\n\nexport function updateIdRecursiveForArray<TValue>(state: FormArrayState<TValue>, newId: string): FormArrayState<TValue> {\n  const controls = state.controls.map((c, i) => updateIdRecursive(c, `${newId}.${i}`));\n\n  return {\n    ...state,\n    id: newId,\n    controls,\n  };\n}\n\nexport function updateIdRecursive<TValue>(state: FormState<TValue>, newId: string): FormState<TValue> {\n  if (state.id === newId) {\n    return state;\n  }\n\n  if (isGroupState<TValue>(state)) {\n    return updateIdRecursiveForGroup<TValue>(state, newId) as FormState<TValue>;\n  }\n\n  if (isArrayState<TValue>(state)) {\n    return updateIdRecursiveForArray<TValue>(state, newId) as any;\n  }\n\n  return {\n    ...(state as any),\n    id: newId,\n  };\n}\n","import { Actions, AddArrayControlAction } from '../../actions';\nimport { computeArrayState, createChildState, FormArrayState, FormState } from '../../state';\nimport { childReducer, updateIdRecursive } from './util';\n\nexport function addControlReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== AddArrayControlAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const index = action.index === undefined ? state.controls.length : action.index;\n\n  if (index > state.controls.length || index < 0) {\n    throw new Error(`Index ${index} is out of bounds for array '${state.id}' with length ${state.controls.length}!`);\n  }\n\n  let controls = [...state.controls];\n  controls.splice(index, 0, createChildState(`${state.id}.${index}`, action.value) as FormState<TValue>);\n  controls = controls.map((c, i) => updateIdRecursive(c, `${state.id}.${i}`));\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: true,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, ClearAsyncErrorAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer } from './util';\n\nexport function clearAsyncErrorReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== ClearAsyncErrorAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const name = `$${action.name}`;\n\n  let errors = state.errors;\n\n  if (state.errors.hasOwnProperty(name)) {\n    errors = { ...state.errors };\n    delete (errors as any)[name];\n  }\n\n  const pendingValidations = state.pendingValidations.filter(v => v !== action.name);\n\n  if (errors === state.errors && pendingValidations.length === state.pendingValidations.length) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    state.controls,\n    state.value,\n    errors,\n    pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, DisableAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function disableReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== DisableAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new DisableAction(controlId)),\n    state.value,\n    {},\n    [],\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: false,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, EnableAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function enableReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== EnableAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const controls = dispatchActionPerChild(state.controls, controlId => new EnableAction(controlId));\n\n  if (controls === state.controls && state.isEnabled) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: true,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MarkAsDirtyAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsDirtyReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== MarkAsDirtyAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const controls = dispatchActionPerChild(state.controls, controlId => new MarkAsDirtyAction(controlId));\n\n  if (controls === state.controls) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: true,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MarkAsPristineAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsPristineReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== MarkAsPristineAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isPristine) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new MarkAsPristineAction(controlId)),\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: false,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MarkAsSubmittedAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsSubmittedReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== MarkAsSubmittedAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const controls = dispatchActionPerChild(state.controls, controlId => new MarkAsSubmittedAction(controlId));\n\n  if (controls === state.controls) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: true,\n    },\n  );\n}\n","import { Actions, MarkAsTouchedAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsTouchedReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== MarkAsTouchedAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const controls = dispatchActionPerChild(state.controls, controlId => new MarkAsTouchedAction(controlId));\n\n  if (controls === state.controls) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: true,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MarkAsUnsubmittedAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsUnsubmittedReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== MarkAsUnsubmittedAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isUnsubmitted) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new MarkAsUnsubmittedAction(controlId)),\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: false,\n    },\n  );\n}\n","import { Actions, MarkAsUntouchedAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsUntouchedReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== MarkAsUntouchedAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isUntouched) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new MarkAsUntouchedAction(controlId)),\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: false,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MoveArrayControlAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, updateIdRecursive } from './util';\n\nexport function move(array: readonly any[], fromIndex: number, toIndex: number) {\n  const item = array[fromIndex];\n  const length = array.length;\n  if (fromIndex > toIndex) {\n    return [\n      ...array.slice(0, toIndex),\n      item,\n      ...array.slice(toIndex, fromIndex),\n      ...array.slice(fromIndex + 1, length),\n    ];\n  } else {\n    const targetIndex = toIndex + 1;\n    return [\n      ...array.slice(0, fromIndex),\n      ...array.slice(fromIndex + 1, targetIndex),\n      item,\n      ...array.slice(targetIndex, length),\n    ];\n  }\n}\n\nexport function moveControlReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== MoveArrayControlAction.TYPE) {\n    return state;\n  }\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const fromIndex = action.fromIndex;\n  const toIndex = action.toIndex;\n\n  if (fromIndex === toIndex) {\n    return state;\n  }\n\n  if (fromIndex < 0 || toIndex < 0) {\n    throw new Error(`fromIndex ${fromIndex} or toIndex ${fromIndex} was negative`);\n  }\n\n  if (fromIndex >= state.controls.length || toIndex >= state.controls.length) {\n    throw new Error(`fromIndex ${fromIndex} or toIndex ${toIndex} is out of bounds with the length of the controls ${state.controls.length}`);\n  }\n\n  let controls = move(state.controls, fromIndex, toIndex);\n\n  controls = controls.map((c, i) => updateIdRecursive(c, `${state.id}.${i}`));\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: true,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    }\n  );\n}\n","import { Actions, RemoveArrayControlAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, updateIdRecursive } from './util';\n\nexport function removeControlReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== RemoveArrayControlAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (action.index >= state.controls.length || action.index < 0) {\n    throw new Error(`Index ${action.index} is out of bounds for array '${state.id}' with length ${state.controls.length}!`);\n  }\n\n  const index = action.index;\n  const controls = state.controls.filter((_, i) => i !== index).map((c, i) => updateIdRecursive(c, `${state.id}.${i}`));\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: true,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, ResetAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function resetReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== ResetAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isPristine && state.isUntouched && state.isUnsubmitted) {\n    return state;\n  }\n\n  return computeArrayState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new ResetAction(controlId)),\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: false,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: false,\n      wasOrShouldBeSubmitted: false,\n    },\n  );\n}\n","import { Actions, SetAsyncErrorAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { deepEquals } from '../../util';\nimport { childReducer } from './util';\n\nexport function setAsyncErrorReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== SetAsyncErrorAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  const name = `$${action.name}`;\n  let value = action.value;\n\n  if (deepEquals(state.errors[name], action.value)) {\n    value = state.errors[name];\n  }\n\n  const errors = { ...state.errors, [name]: value };\n  const pendingValidations = state.pendingValidations.filter(v => v !== action.name);\n\n  return computeArrayState(\n    state.id,\n    state.controls,\n    state.value,\n    errors,\n    pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, SetErrorsAction } from '../../actions';\nimport { computeArrayState, FormArrayState, ValidationErrors } from '../../state';\nimport { deepEquals } from '../../util';\nimport { childReducer } from './util';\n\nexport function setErrorsReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== SetErrorsAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  if (state.errors === action.errors) {\n    return state;\n  }\n\n  if (deepEquals(state.errors, action.errors)) {\n    return state;\n  }\n\n  if (!action.errors || typeof (action.errors as any) !== 'object' || Array.isArray(action.errors)) {\n    throw new Error(`Control errors must be an object; got ${action.errors}`);\n  }\n\n  if (Object.keys(action.errors).some(key => key.startsWith('_'))) {\n    throw new Error(`Control errors must not use underscore as a prefix; got ${JSON.stringify(action.errors)}`);\n  }\n\n  if (Object.keys(action.errors).some(key => key.startsWith('$'))) {\n    throw new Error(`Control errors must not use $ as a prefix; got ${JSON.stringify(action.errors)}`);\n  }\n\n  const childAndAsyncErrors =\n    Object.keys(state.errors)\n      .filter(key => key.startsWith('_') || key.startsWith('$'))\n      .reduce((res, key) => Object.assign(res, { [key]: state.errors[key] }), {} as ValidationErrors);\n\n  const newErrors = Object.assign(childAndAsyncErrors, action.errors);\n\n  return computeArrayState(\n    state.id,\n    state.controls,\n    state.value,\n    newErrors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, SetUserDefinedPropertyAction } from '../../actions';\nimport { FormArrayState } from '../../state';\nimport { childReducer } from './util';\n\nexport function setUserDefinedPropertyReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== SetUserDefinedPropertyAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.userDefinedProperties[action.name] === action.value) {\n    return state;\n  }\n\n  return {\n    ...state,\n    userDefinedProperties: {\n      ...state.userDefinedProperties,\n      [action.name]: action.value,\n    },\n  };\n}\n","import { Actions, SetValueAction } from '../../actions';\nimport { formStateReducer } from '../../reducer';\nimport { computeArrayState, createChildState, FormArrayState } from '../../state';\nimport { childReducer } from './util';\n\nexport function setValueReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== SetValueAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.value === action.value) {\n    return state;\n  }\n\n  if (action.value instanceof Date) {\n    throw new Error('Date values are not supported. Please used serialized strings instead.');\n  }\n\n  const value = action.value;\n\n  const controls = value\n    .map((v, i) => {\n      if (!state.controls[i]) {\n        return createChildState(`${state.id}.${i}`, v);\n      }\n\n      return formStateReducer<TValue>(state.controls[i], new SetValueAction(state.controls[i].id, v));\n    });\n\n  return computeArrayState(\n    state.id,\n    controls,\n    value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, StartAsyncValidationAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer } from './util';\n\nexport function startAsyncValidationReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== StartAsyncValidationAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.pendingValidations.indexOf(action.name) >= 0) {\n    return state;\n  }\n\n  const pendingValidations = [...state.pendingValidations, action.name];\n\n  return computeArrayState(\n    state.id,\n    state.controls,\n    state.value,\n    state.errors,\n    pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, SwapArrayControlAction } from '../../actions';\nimport { computeArrayState, FormArrayState } from '../../state';\nimport { childReducer, updateIdRecursive } from './util';\n\nfunction swapArrayValues(a: readonly any[], i: number, j: number) {\n  const n = [...a];\n  [n[i], n[j]] = [n[j], n[i]];\n  return n;\n}\n\nexport function swapControlReducer<TValue>(\n  state: FormArrayState<TValue>,\n  action: Actions<TValue[]>,\n): FormArrayState<TValue> {\n  if (action.type !== SwapArrayControlAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const fromIndex = action.fromIndex;\n  const toIndex = action.toIndex;\n\n  if (fromIndex === toIndex) {\n    return state;\n  }\n\n  if (fromIndex < 0 || toIndex < 0) {\n    throw new Error(`fromIndex ${fromIndex} or toIndex ${fromIndex} was negative`);\n  }\n\n  if (fromIndex >= state.controls.length || toIndex >= state.controls.length) {\n    throw new Error(`fromIndex ${fromIndex} or toIndex ${toIndex} is out of bounds with the length of the controls ${state.controls.length}`);\n  }\n\n  let controls = swapArrayValues(state.controls, fromIndex, toIndex);\n  controls = controls.map((c, i) => (i >= fromIndex || i >= toIndex) ? updateIdRecursive(c, `${state.id}.${i}`) : c);\n\n  return computeArrayState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: true,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    }\n  );\n}\n","import { Action } from '@ngrx/store';\n\nimport {\n  Actions,\n  AddGroupControlAction,\n  FocusAction,\n  isNgrxFormsAction,\n  RemoveGroupControlAction,\n  UnfocusAction,\n} from '../actions';\nimport { FormArrayState, isArrayState } from '../state';\nimport { addControlReducer } from './reducer/add-control';\nimport { clearAsyncErrorReducer } from './reducer/clear-async-error';\nimport { disableReducer } from './reducer/disable';\nimport { enableReducer } from './reducer/enable';\nimport { markAsDirtyReducer } from './reducer/mark-as-dirty';\nimport { markAsPristineReducer } from './reducer/mark-as-pristine';\nimport { markAsSubmittedReducer } from './reducer/mark-as-submitted';\nimport { markAsTouchedReducer } from './reducer/mark-as-touched';\nimport { markAsUnsubmittedReducer } from './reducer/mark-as-unsubmitted';\nimport { markAsUntouchedReducer } from './reducer/mark-as-untouched';\nimport { moveControlReducer } from './reducer/move-control';\nimport { removeControlReducer } from './reducer/remove-control';\nimport { resetReducer } from './reducer/reset';\nimport { setAsyncErrorReducer } from './reducer/set-async-error';\nimport { setErrorsReducer } from './reducer/set-errors';\nimport { setUserDefinedPropertyReducer } from './reducer/set-user-defined-property';\nimport { setValueReducer } from './reducer/set-value';\nimport { startAsyncValidationReducer } from './reducer/start-async-validation';\nimport { swapControlReducer } from './reducer/swap-control';\nimport { childReducer } from './reducer/util';\n\nexport function formArrayReducerInternal<TValue>(state: FormArrayState<TValue>, action: Actions<TValue[]>) {\n  if (!isArrayState(state)) {\n    throw new Error('The state must be an array state');\n  }\n\n  if (!isNgrxFormsAction(action)) {\n    return state;\n  }\n\n  if (!action.controlId.startsWith(state.id)) {\n    return state;\n  }\n\n  switch (action.type) {\n    case FocusAction.TYPE:\n    case UnfocusAction.TYPE:\n    case AddGroupControlAction.TYPE:\n    case RemoveGroupControlAction.TYPE:\n      return childReducer(state, action);\n\n    default:\n      break;\n  }\n\n  state = setValueReducer(state, action);\n  state = setErrorsReducer(state, action);\n  state = startAsyncValidationReducer(state, action);\n  state = setAsyncErrorReducer(state, action);\n  state = clearAsyncErrorReducer(state, action);\n  state = enableReducer(state, action);\n  state = disableReducer(state, action);\n  state = markAsDirtyReducer(state, action);\n  state = markAsPristineReducer(state, action);\n  state = markAsTouchedReducer(state, action);\n  state = markAsUntouchedReducer(state, action);\n  state = markAsSubmittedReducer(state, action);\n  state = markAsUnsubmittedReducer(state, action);\n  state = setUserDefinedPropertyReducer(state, action);\n  state = resetReducer(state, action);\n  state = addControlReducer(state, action);\n  state = removeControlReducer(state, action);\n  state = swapControlReducer(state, action);\n  state = moveControlReducer(state, action);\n\n  return state;\n}\n\n/**\n * This reducer function updates a form array state with actions.\n */\nexport function formArrayReducer<TValue>(state: FormArrayState<TValue> | undefined, action: Action) {\n  if (!state) {\n    throw new Error('The array state must be defined!');\n  }\n\n  return formArrayReducerInternal(state, action as any);\n}\n","import { Action, ActionReducer } from '@ngrx/store';\n\nimport { Actions, ALL_NGRX_FORMS_ACTION_TYPES } from './actions';\nimport { formArrayReducer } from './array/reducer';\nimport { formControlReducer } from './control/reducer';\nimport { formGroupReducer } from './group/reducer';\nimport { AbstractControlState, FormControlState, FormState, isArrayState, isFormState, isGroupState } from './state';\nimport { ProjectFn } from './update-function/util';\n\nexport function formStateReducer<TValue>(\n  state: FormState<TValue> | AbstractControlState<TValue> | undefined,\n  action: Action,\n): FormState<TValue> {\n  if (!state) {\n    throw new Error('The form state must be defined!');\n  }\n\n  if (!isFormState(state)) {\n    throw new Error(`state must be a form state, got ${state}`);\n  }\n\n  if (isGroupState(state)) {\n    return formGroupReducer(state, action) as any;\n  }\n\n  if (isArrayState(state)) {\n    return formArrayReducer(state, action) as any;\n  }\n\n  return formControlReducer(state as FormControlState<any>, action) as any;\n}\n\n/**\n * This function creates a reducer function that first applies an action to the state\n * and afterwards applies all given update functions one after another to the resulting\n * form state. However, the update functions are only applied if the form state changed\n * as result of applying the action. If you need the update functions to be applied\n * regardless of whether the state changed (e.g. because the update function closes\n * over variables that may change independently of the form state) you can simply apply\n * the update manually (e.g. `updateFunction(formStateReducer(state, action))`).\n *\n * The following (contrived) example uses this function to create a reducer that after\n * each action validates the child control `name` to be required and sets the child\n * control `email`'s value to be `''` if the name is invalid.\n *\n```typescript\ninterface FormValue {\n  name: string;\n  email: string;\n}\n\nconst updateFormState = updateGroup<FormValue>(\n  {\n    name: validate(required),\n  },\n  {\n    email: (email, parentGroup) =>\n      parentGroup.controls.name.isInvalid\n        ? setValue('', email)\n        : email,\n  },\n);\n\nconst reducer = createFormStateReducerWithUpdate<FormValue>(updateFormState);\n```\n */\nexport function createFormStateReducerWithUpdate<TValue>(\n  updateFnOrUpdateFnArr: ProjectFn<FormState<TValue>> | ProjectFn<FormState<TValue>>[],\n  ...updateFnArr: ProjectFn<FormState<TValue>>[]\n): ActionReducer<FormState<TValue>> {\n  updateFnArr = [...(Array.isArray(updateFnOrUpdateFnArr) ? updateFnOrUpdateFnArr : [updateFnOrUpdateFnArr]), ...updateFnArr];\n  return (state: FormState<TValue> | undefined, action: Action): FormState<TValue> => {\n    const newState = formStateReducer(state as AbstractControlState<TValue>, action);\n    return newState === state ? state : updateFnArr.reduce((s, f) => f(s), newState);\n  };\n}\n\nfunction reduceNestedFormState<TState>(state: TState, key: keyof TState, action: Action): TState {\n  const value = state[key];\n\n  if (!isFormState(value)) {\n    return state;\n  }\n\n  return {\n    ...state,\n    [key]: formStateReducer(value, action),\n  };\n}\n\nfunction reduceNestedFormStates<TState>(state: TState, action: Action): TState {\n  return Object.keys(state).reduce((s, key) => reduceNestedFormState(s, key as keyof TState, action), state);\n}\n\n/**\n * This function returns an object that can be passed to ngrx's `createReducer`\n * function (available starting with ngrx version 8). By doing this all form\n * state properties on the state will be updated whenever necessary (i.e.\n * whenever an ngrx-forms action is dispatched).\n *\n * To manually update a form state (e.g. to validate it) use\n * `wrapReducerWithFormStateUpdate`.\n */\nexport function onNgrxForms<TState = any>(): { reducer: ActionReducer<TState>; types: string[] } {\n  return {\n    reducer: (state, action) => reduceNestedFormStates(state!, action),\n    types: ALL_NGRX_FORMS_ACTION_TYPES,\n  };\n}\n\nexport interface ActionConstructor {\n  new(...args: any[]): Actions<any>;\n  readonly TYPE: string;\n}\n\nexport type CreatedAction<TActionCons> = TActionCons extends new (...args: any[]) => infer TAction ? TAction : never;\n\n/**\n * Define a reducer for a ngrx-forms action. This functions works the same as\n * ngrx's `on` except that you provide the ngrx-forms action class instead of\n * your action creator as a parameter.\n */\nexport function onNgrxFormsAction<\n  TActionCons extends ActionConstructor,\n  TState\n>(\n  actionCons: TActionCons,\n  reducer: (state: TState, action: CreatedAction<TActionCons>) => TState,\n): { reducer: ActionReducer<TState>; types: string[] } {\n  return {\n    reducer: (state, action) => reducer(reduceNestedFormStates(state!, action), action as any),\n    types: [actionCons.TYPE],\n  };\n}\n\n/**\n * This function wraps a reducer and returns another reducer that first calls\n * the given reducer and then calls the given update function for the form state\n * that is specified by the form state locator function.\n *\n * The update function is passed the form state and the updated containing state\n * as parameters.\n */\nexport function wrapReducerWithFormStateUpdate<TState, TFormState extends AbstractControlState<any>>(\n  reducer: ActionReducer<TState>,\n  formStateLocator: (state: TState) => TFormState,\n  updateFn: (formState: TFormState, state: TState) => TFormState,\n): ActionReducer<TState> {\n  return (state, action) => {\n    const updatedState = reducer(state, action);\n\n    const formState = formStateLocator(updatedState);\n    const formStateKey = Object.keys(updatedState).find(key => updatedState[key as keyof TState] as any === formState)!;\n\n    const updatedFormState = updateFn(formState, updatedState);\n\n    if (updatedFormState === formState) {\n      return updatedState;\n    }\n\n    return {\n      ...updatedState,\n      [formStateKey]: updatedFormState,\n    };\n  };\n}\n","import { Actions } from '../../actions';\nimport { formStateReducer } from '../../reducer';\nimport { computeGroupState, FormGroupControls, FormGroupState, FormState, KeyValue } from '../../state';\n\nexport function dispatchActionPerChild<TValue extends KeyValue>(\n  controls: FormGroupControls<TValue>,\n  actionCreator: (controlId: string) => Actions<TValue>,\n) {\n  let hasChanged = false;\n  const newControls = Object.keys(controls)\n    .reduce((c, key) => {\n      Object.assign(c, { [key]: formStateReducer(controls[key], actionCreator(controls[key].id)) });\n      hasChanged = hasChanged || c[key] !== controls[key];\n      return c;\n    }, {} as FormGroupControls<TValue>);\n  return hasChanged ? newControls : controls;\n}\n\nfunction callChildReducers<TValue extends { [key: string]: any }>(\n  controls: FormGroupControls<TValue>,\n  action: Actions<TValue>,\n): FormGroupControls<TValue> {\n  let hasChanged = false;\n  const newControls = Object.keys(controls)\n    .map(key => [key, formStateReducer(controls[key], action)] as [string, FormState<any>])\n    .reduce((res, [key, state]) => {\n      hasChanged = hasChanged || state !== controls[key];\n      return Object.assign(res, { [key]: state });\n    }, {} as FormGroupControls<TValue>);\n  return hasChanged ? newControls : controls;\n}\n\nexport function childReducer<TValue extends KeyValue>(state: FormGroupState<TValue>, action: Actions<TValue>) {\n  const controls = callChildReducers(state.controls, action);\n\n  if (state.controls === controls) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, AddGroupControlAction } from '../../actions';\nimport { computeGroupState, createChildState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer } from './util';\n\nexport function addControlReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== AddGroupControlAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.controls.hasOwnProperty(action.name)) {\n    throw new Error(`Group '${state.id}' already has child control '${action.name}'!`); // `;\n  }\n\n  const controls = Object.assign({}, state.controls, {\n    [action.name]: createChildState(`${state.id}.${action.name}`, action.value),\n  });\n\n  return computeGroupState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: true,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, ClearAsyncErrorAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer } from './util';\n\nexport function clearAsyncErrorReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== ClearAsyncErrorAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const name = `$${action.name}`;\n\n  let errors = state.errors;\n\n  if (errors.hasOwnProperty(name)) {\n    errors = { ...state.errors };\n    delete (errors as any)[name];\n  }\n\n  const pendingValidations = state.pendingValidations.filter(v => v !== action.name);\n\n  if (errors === state.errors && pendingValidations.length === state.pendingValidations.length) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    state.controls,\n    state.value,\n    errors,\n    pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, DisableAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function disableReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== DisableAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new DisableAction(controlId)),\n    state.value,\n    {},\n    [],\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: false,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, EnableAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function enableReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== EnableAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const controls = dispatchActionPerChild(state.controls, controlId => new EnableAction(controlId));\n\n  if (controls === state.controls) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: true,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MarkAsDirtyAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsDirtyReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== MarkAsDirtyAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const controls = dispatchActionPerChild(state.controls, controlId => new MarkAsDirtyAction(controlId));\n\n  if (controls === state.controls) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: true,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MarkAsPristineAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsPristineReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== MarkAsPristineAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isPristine) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new MarkAsPristineAction(controlId)),\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: false,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MarkAsSubmittedAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsSubmittedReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== MarkAsSubmittedAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const controls = dispatchActionPerChild(state.controls, controlId => new MarkAsSubmittedAction(controlId));\n\n  if (controls === state.controls) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: true,\n    },\n  );\n}\n","import { Actions, MarkAsTouchedAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsTouchedReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== MarkAsTouchedAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  const controls = dispatchActionPerChild(state.controls, controlId => new MarkAsTouchedAction(controlId));\n\n  if (controls === state.controls) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: true,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, MarkAsUnsubmittedAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsUnsubmittedReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== MarkAsUnsubmittedAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isUnsubmitted) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new MarkAsUnsubmittedAction(controlId)),\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: false,\n    },\n  );\n}\n","import { Actions, MarkAsUntouchedAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function markAsUntouchedReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== MarkAsUntouchedAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isUntouched) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new MarkAsUntouchedAction(controlId)),\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: false,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, RemoveGroupControlAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer } from './util';\n\nexport function removeControlReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== RemoveGroupControlAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (!state.controls.hasOwnProperty(action.name)) {\n    throw new Error(`Group '${state.id}' does not have child control '${action.name}'!`); // `;\n  }\n\n  const controls = Object.assign({}, state.controls);\n  delete controls[action.name];\n\n  return computeGroupState(\n    state.id,\n    controls,\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: true,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, ResetAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer, dispatchActionPerChild } from './util';\n\nexport function resetReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== ResetAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isPristine && state.isUntouched && state.isUnsubmitted) {\n    return state;\n  }\n\n  return computeGroupState(\n    state.id,\n    dispatchActionPerChild(state.controls, controlId => new ResetAction(controlId)),\n    state.value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: false,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: false,\n      wasOrShouldBeSubmitted: false,\n    },\n  );\n}\n","import { Actions, SetAsyncErrorAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { deepEquals } from '../../util';\nimport { childReducer } from './util';\n\nexport function setAsyncErrorReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== SetAsyncErrorAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  const name = `$${action.name}`;\n  let value = action.value;\n\n  if (deepEquals(state.errors[name], action.value)) {\n    value = state.errors[name];\n  }\n\n  const errors = { ...state.errors, [name]: value };\n  const pendingValidations = state.pendingValidations.filter(v => v !== action.name);\n\n  return computeGroupState(\n    state.id,\n    state.controls,\n    state.value,\n    errors,\n    pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, SetErrorsAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue, ValidationErrors } from '../../state';\nimport { deepEquals } from '../../util';\nimport { childReducer } from './util';\n\nexport function setErrorsReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== SetErrorsAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.isDisabled) {\n    return state;\n  }\n\n  if (state.errors === action.errors) {\n    return state;\n  }\n\n  if (deepEquals(state.errors, action.errors)) {\n    return state;\n  }\n\n  if (!action.errors || typeof (action.errors as any) !== 'object' || Array.isArray(action.errors)) {\n    throw new Error(`Control errors must be an object; got ${action.errors}`); // `;\n  }\n\n  if (Object.keys(action.errors).some(key => key.startsWith('_'))) {\n    throw new Error(`Control errors must not use underscore as a prefix; got ${JSON.stringify(action.errors)}`); // `;\n  }\n\n  if (Object.keys(action.errors).some(key => key.startsWith('$'))) {\n    throw new Error(`Control errors must not use $ as a prefix; got ${JSON.stringify(action.errors)}`); // `;\n  }\n\n  const childAndAsyncErrors =\n    Object.keys(state.errors)\n      .filter(key => key.startsWith('_') || key.startsWith('$'))\n      .reduce((res, key) => Object.assign(res, { [key]: state.errors[key] }), {} as ValidationErrors);\n\n  const newErrors = Object.assign(childAndAsyncErrors, action.errors);\n\n  return computeGroupState(\n    state.id,\n    state.controls,\n    state.value,\n    newErrors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, SetUserDefinedPropertyAction } from '../../actions';\nimport { FormGroupState, KeyValue } from '../../state';\nimport { childReducer } from './util';\n\nexport function setUserDefinedPropertyReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== SetUserDefinedPropertyAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.userDefinedProperties[action.name] === action.value) {\n    return state;\n  }\n\n  return {\n    ...state,\n    userDefinedProperties: {\n      ...state.userDefinedProperties,\n      [action.name]: action.value,\n    },\n  };\n}\n","import { Actions, SetValueAction } from '../../actions';\nimport { formStateReducer } from '../../reducer';\nimport { computeGroupState, createChildState, FormGroupControls, FormGroupState, KeyValue } from '../../state';\nimport { isBoxed, unbox } from '../../boxing';\nimport { childReducer } from './util';\n\nexport function setValueReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== SetValueAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.value === action.value) {\n    return state;\n  }\n\n  if (action.value instanceof Date) {\n    throw new Error('Date values are not supported. Please used serialized strings instead.');\n  }\n\n  let value = action.value;\n  if (isBoxed(value)) {\n    value = unbox(value);\n  }\n\n  const controls = Object.keys(value)\n    .reduce((c, key) => {\n      // tslint:disable-next-line:prefer-conditional-expression\n      if (!state.controls[key]) {\n        Object.assign(c, { [key]: createChildState<TValue[string]>(`${state.id}.${key}`, value[key]) });\n      } else {\n        Object.assign(c, { [key]: formStateReducer(state.controls[key], new SetValueAction(state.controls[key].id, value[key])) });\n      }\n      return c;\n    }, {} as FormGroupControls<TValue>);\n\n  return computeGroupState(\n    state.id,\n    controls,\n    value,\n    state.errors,\n    state.pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Actions, StartAsyncValidationAction } from '../../actions';\nimport { computeGroupState, FormGroupState, KeyValue } from '../../state';\nimport { childReducer } from './util';\n\nexport function startAsyncValidationReducer<TValue extends KeyValue>(\n  state: FormGroupState<TValue>,\n  action: Actions<TValue>,\n): FormGroupState<TValue> {\n  if (action.type !== StartAsyncValidationAction.TYPE) {\n    return state;\n  }\n\n  if (action.controlId !== state.id) {\n    return childReducer(state, action);\n  }\n\n  if (state.pendingValidations.indexOf(action.name) >= 0) {\n    return state;\n  }\n\n  const pendingValidations = [...state.pendingValidations, action.name];\n\n  return computeGroupState(\n    state.id,\n    state.controls,\n    state.value,\n    state.errors,\n    pendingValidations,\n    state.userDefinedProperties,\n    {\n      wasOrShouldBeDirty: state.isDirty,\n      wasOrShouldBeEnabled: state.isEnabled,\n      wasOrShouldBeTouched: state.isTouched,\n      wasOrShouldBeSubmitted: state.isSubmitted,\n    },\n  );\n}\n","import { Action } from '@ngrx/store';\n\nimport {\n  Actions,\n  AddArrayControlAction,\n  FocusAction,\n  isNgrxFormsAction,\n  RemoveArrayControlAction,\n  UnfocusAction,\n} from '../actions';\nimport { FormGroupState, isGroupState, KeyValue } from '../state';\nimport { addControlReducer } from './reducer/add-control';\nimport { clearAsyncErrorReducer } from './reducer/clear-async-error';\nimport { disableReducer } from './reducer/disable';\nimport { enableReducer } from './reducer/enable';\nimport { markAsDirtyReducer } from './reducer/mark-as-dirty';\nimport { markAsPristineReducer } from './reducer/mark-as-pristine';\nimport { markAsSubmittedReducer } from './reducer/mark-as-submitted';\nimport { markAsTouchedReducer } from './reducer/mark-as-touched';\nimport { markAsUnsubmittedReducer } from './reducer/mark-as-unsubmitted';\nimport { markAsUntouchedReducer } from './reducer/mark-as-untouched';\nimport { removeControlReducer } from './reducer/remove-control';\nimport { resetReducer } from './reducer/reset';\nimport { setAsyncErrorReducer } from './reducer/set-async-error';\nimport { setErrorsReducer } from './reducer/set-errors';\nimport { setUserDefinedPropertyReducer } from './reducer/set-user-defined-property';\nimport { setValueReducer } from './reducer/set-value';\nimport { startAsyncValidationReducer } from './reducer/start-async-validation';\nimport { childReducer } from './reducer/util';\n\nexport function formGroupReducerInternal<TValue extends KeyValue>(state: FormGroupState<TValue>, action: Actions<TValue>) {\n  if (!isGroupState(state)) {\n    throw new Error('The state must be a group state');\n  }\n\n  if (!isNgrxFormsAction(action)) {\n    return state;\n  }\n\n  if (!action.controlId.startsWith(state.id)) {\n    return state;\n  }\n\n  switch (action.type) {\n    case FocusAction.TYPE:\n    case UnfocusAction.TYPE:\n    case AddArrayControlAction.TYPE:\n    case RemoveArrayControlAction.TYPE:\n      return childReducer(state, action);\n\n    default:\n      break;\n  }\n\n  state = setValueReducer(state, action);\n  state = setErrorsReducer(state, action);\n  state = startAsyncValidationReducer(state, action);\n  state = setAsyncErrorReducer(state, action);\n  state = clearAsyncErrorReducer(state, action);\n  state = enableReducer(state, action);\n  state = disableReducer(state, action);\n  state = markAsDirtyReducer(state, action);\n  state = markAsPristineReducer(state, action);\n  state = markAsTouchedReducer(state, action);\n  state = markAsUntouchedReducer(state, action);\n  state = markAsSubmittedReducer(state, action);\n  state = markAsUnsubmittedReducer(state, action);\n  state = addControlReducer(state, action);\n  state = removeControlReducer(state, action);\n  state = setUserDefinedPropertyReducer(state, action);\n  state = resetReducer(state, action);\n\n  return state;\n}\n\n/**\n * This reducer function updates a form group state with actions.\n */\nexport function formGroupReducer<TValue extends KeyValue>(state: FormGroupState<TValue> | undefined, action: Action) {\n  if (!state) {\n    throw new Error('The group state must be defined!');\n  }\n\n  return formGroupReducerInternal(state, action as any);\n}\n","import { Action } from '@ngrx/store';\n\nimport { formArrayReducer } from '../array/reducer';\nimport { formControlReducer } from '../control/reducer';\nimport { formGroupReducer } from '../group/reducer';\nimport { AbstractControlState, isArrayState, isGroupState } from '../state';\n\nexport type ProjectFn<T> = (t: T) => T;\nexport type ProjectFn2<T, K> = (t: T, k: K) => T;\n\nexport function abstractControlReducer<TValue>(state: AbstractControlState<TValue>, action: Action): AbstractControlState<TValue> {\n  if (isArrayState(state)) {\n    return formArrayReducer(state, action as any) as any;\n  }\n\n  if (isGroupState(state)) {\n    return formGroupReducer(state, action);\n  }\n\n  return formControlReducer(state as any, action) as any;\n}\n\nexport function compose<T>(...fns: ((t: T) => T)[]) {\n  return (t: T) => fns.reduce((res, f) => f(res), t);\n}\n\nexport function ensureState<TState>(state: TState | undefined): TState {\n  if (!state) {\n    throw new Error('state must not be undefined!');\n  }\n\n  return state;\n}\n","import { computeArrayState, FormArrayState, FormState, isArrayState } from '../state';\nimport { ensureState, ProjectFn2 } from './util';\n\nexport type FilterFn<TValue> = (s: FormState<TValue>, idx: number) => boolean;\n\nfunction updateArrayControlsState<TValue>(filterFn: FilterFn<TValue>, updateFn: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>) {\n  return (state: FormArrayState<TValue>) => {\n    let hasChanged = false;\n    const newControls = state.controls.map((control, idx) => {\n      if (!filterFn(control, idx)) {\n        return control;\n      }\n\n      const newControl = updateFn(control, state);\n      hasChanged = hasChanged || newControl !== control;\n      return newControl;\n    });\n    return hasChanged ? newControls : state.controls;\n  };\n}\n\nfunction updateArraySingle<TValue>(filterFn: FilterFn<TValue>, updateFn: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>) {\n  return (state: FormArrayState<TValue>): FormArrayState<TValue> => {\n    const newControls = updateArrayControlsState<TValue>(filterFn, updateFn)(state);\n    return newControls !== state.controls\n      ? computeArrayState<TValue>(\n        state.id,\n        newControls,\n        state.value,\n        state.errors,\n        state.pendingValidations,\n        state.userDefinedProperties,\n        {\n          wasOrShouldBeDirty: state.isDirty,\n          wasOrShouldBeEnabled: state.isEnabled,\n          wasOrShouldBeTouched: state.isTouched,\n          wasOrShouldBeSubmitted: state.isSubmitted,\n        },\n      )\n      : state;\n  };\n}\n\n/**\n * This update function takes a filter function and one or more update functions\n * and returns a projection function that applies all update functions one after\n * another to each element of the form array state for which the filter function\n * returns `true`.\n *\n * The following (contrived) example uses this function to validate all its\n * children to be required and mark them as dirty.\n *\n```typescript\nconst arrayUpdateFn = updateArray<string>(\n  (_, idx) => idx > 0,\n  validate(required),\n  markAsDirty,\n);\nconst updatedState = arrayUpdateFn(state);\n```\n */\nexport function updateArrayWithFilter<TValue>(\n  filterFn: FilterFn<TValue>,\n  updateFn: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>,\n  ...updateFnArr: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[]\n): (state: FormArrayState<TValue>) => FormArrayState<TValue>;\n\n/**\n * This update function takes a filter function and an array of update functions\n * and returns a projection function that applies all update functions one after\n * another to each element of the form array state for which the filter function\n * returns `true`.\n *\n * The following (contrived) example uses this function to validate all its\n * children to be required and mark them as dirty.\n *\n```typescript\nconst arrayUpdateFn = updateArray<string>(\n  (_, idx) => idx > 0,\n  [\n    validate(required),\n    markAsDirty,\n  ],\n);\nconst updatedState = arrayUpdateFn(state);\n```\n */\nexport function updateArrayWithFilter<TValue>(\n  filterFn: FilterFn<TValue>,\n  updateFnArr: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[],\n): (state: FormArrayState<TValue>) => FormArrayState<TValue>;\n\n/**\n * This update function takes a form array state, a filter function, and a variable\n * number of update functions and applies all update functions one after another to\n * each element of the form array state for which the filter function returns `true`.\n *\n * The following (contrived) example uses this function to validate all its\n * children to be required and mark them as dirty.\n *\n```typescript\nconst updatedState = updateArray<string>(\n  state,\n  (_, idx) => idx > 0,\n  validate(required),\n  markAsDirty,\n);\n```\n */\nexport function updateArrayWithFilter<TValue>(\n  state: FormArrayState<TValue>,\n  filterFn: FilterFn<TValue>,\n  updateFn: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>,\n  ...updateFnArr: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[]\n): FormArrayState<TValue>;\n\n/**\n * This update function takes a form array state, a filter function, and an array of\n * update functions and applies all update functions one after another to each\n * element of the form array state for which the filter function returns `true`.\n *\n * The following (contrived) example uses this function to validate all its\n * children to be required and mark them as dirty.\n *\n```typescript\nconst updatedState = updateArray<string>(\n  state,\n  (_, idx) => idx > 0,\n  [\n    validate(required),\n    markAsDirty,\n  ],\n);\n```\n */\nexport function updateArrayWithFilter<TValue>(\n  state: FormArrayState<TValue>,\n  filterFn: FilterFn<TValue>,\n  updateFnArr: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[],\n): FormArrayState<TValue>;\n\nexport function updateArrayWithFilter<TValue>(\n  stateOrFilterFunction: FormArrayState<TValue> | FilterFn<TValue>,\n  filterFunctionOrFunctionOrFunctionArray:\n    | FilterFn<TValue>\n    | ProjectFn2<FormState<TValue>, FormArrayState<TValue>>\n    | ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[],\n  updateFnOrUpdateFnArr?: ProjectFn2<FormState<TValue>, FormArrayState<TValue>> | ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[],\n  ...rest: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[]\n) {\n  if (isArrayState<TValue>(stateOrFilterFunction)) {\n    const filterFn = filterFunctionOrFunctionOrFunctionArray as FilterFn<TValue>;\n    const updateFnArr = Array.isArray(updateFnOrUpdateFnArr) ? updateFnOrUpdateFnArr : [updateFnOrUpdateFnArr!];\n    return updateFnArr.concat(...rest).reduce((s, updateFn) => updateArraySingle<TValue>(filterFn, updateFn)(s), stateOrFilterFunction);\n  }\n\n  let updateFnArr = Array.isArray(filterFunctionOrFunctionOrFunctionArray)\n    ? filterFunctionOrFunctionOrFunctionArray\n    : [filterFunctionOrFunctionOrFunctionArray as ProjectFn2<FormState<TValue>, FormArrayState<TValue>>];\n  updateFnArr = updateFnOrUpdateFnArr === undefined ? updateFnArr : updateFnArr.concat(updateFnOrUpdateFnArr);\n  return (s: FormArrayState<TValue>) => updateArrayWithFilter<TValue>(ensureState(s), stateOrFilterFunction, updateFnArr.concat(rest));\n}\n\n/**\n * This update function takes one or more update functions and returns a\n * projection function that applies all update functions one after another to\n * each element of the form array state.\n *\n * The following (contrived) example uses this function to validate all its\n * children to be required and mark them as dirty.\n *\n```typescript\nconst arrayUpdateFn = updateArray<string>(\n  validate<string>(required),\n  markAsDirty,\n);\nconst updatedState = arrayUpdateFn(state);\n```\n */\nexport function updateArray<TValue>(\n  updateFn: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>,\n  ...updateFnArr: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[]\n): (state: FormArrayState<TValue>) => FormArrayState<TValue>;\n\n/**\n * This update function takes an array of update functions and returns\n * a projection function that applies all update functions one after another to\n * each element of the form array state.\n *\n * The following (contrived) example uses this function to validate all its\n * children to be required and mark them as dirty.\n *\n```typescript\nconst arrayUpdateFn = updateArray<string>([\n  validate<string>(required),\n  markAsDirty,\n]);\nconst updatedState = arrayUpdateFn(state);\n```\n */\nexport function updateArray<TValue>(\n  updateFnArr: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[],\n): (state: FormArrayState<TValue>) => FormArrayState<TValue>;\n\n/**\n * This update function takes a form array state and one or more update functions\n * and applies all update functions one after another to each element of the form\n * array state.\n *\n * The following (contrived) example uses this function to validate all its\n * children to be required and mark them as dirty.\n *\n```typescript\nconst updatedState = updateArray<string>(\n  state,\n  validate<string>(required),\n  markAsDirty,\n);\n```\n */\nexport function updateArray<TValue>(\n  state: FormArrayState<TValue>,\n  updateFn: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>,\n  ...updateFnArr: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[]\n): FormArrayState<TValue>;\n\n/**\n * This update function takes a form array state and an array of update\n * functions and applies all update functions one after another to each element\n * of the form array state.\n *\n * The following (contrived) example uses this function to validate all its\n * children to be required and mark them as dirty.\n *\n```typescript\nconst updatedState = updateArray<string>(\n  state,\n  [\n    validate<string>(required),\n    markAsDirty,\n  ],\n);\n```\n */\nexport function updateArray<TValue>(\n  state: FormArrayState<TValue>,\n  updateFnArr: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[],\n): FormArrayState<TValue>;\n\nexport function updateArray<TValue>(\n  stateOrFunctionOrFunctionArray:\n    | FormArrayState<TValue>\n    | ProjectFn2<FormState<TValue>, FormArrayState<TValue>>\n    | ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[],\n  updateFnOrUpdateFnArr?: ProjectFn2<FormState<TValue>, FormArrayState<TValue>> | ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[],\n  ...rest: ProjectFn2<FormState<TValue>, FormArrayState<TValue>>[]\n) {\n  if (isArrayState<TValue>(stateOrFunctionOrFunctionArray)) {\n    const updateFnArr = Array.isArray(updateFnOrUpdateFnArr) ? updateFnOrUpdateFnArr : [updateFnOrUpdateFnArr!];\n    return updateFnArr.concat(...rest).reduce((s, updateFn) => updateArraySingle<TValue>(() => true, updateFn)(s), stateOrFunctionOrFunctionArray);\n  }\n\n  let updateFnArr = Array.isArray(stateOrFunctionOrFunctionArray) ? stateOrFunctionOrFunctionArray : [stateOrFunctionOrFunctionArray];\n  updateFnArr = updateFnOrUpdateFnArr === undefined ? updateFnArr : updateFnArr.concat(updateFnOrUpdateFnArr);\n  return (s: FormArrayState<TValue>) => updateArray<TValue>(ensureState(s), updateFnArr.concat(rest));\n}\n","import { computeGroupState, FormGroupControls, FormGroupState, FormState, isGroupState, KeyValue } from '../state';\nimport { ensureState, ProjectFn2 } from './util';\n\nexport type StateUpdateFns<TValue extends KeyValue> = {\n  [controlId in keyof TValue]?: ProjectFn2<FormState<TValue[controlId]>, FormGroupState<TValue>>;\n};\n\nfunction updateGroupControlsState<TValue extends KeyValue>(updateFns: StateUpdateFns<TValue>) {\n  return (state: FormGroupState<TValue>) => {\n    let hasChanged = false;\n    const newControls = Object.keys(state.controls).reduce((res, key) => {\n      const control = state.controls[key];\n      Object.assign(res, { [key]: control });\n      if (updateFns.hasOwnProperty(key)) {\n        const newControl = updateFns[key]!(control, state);\n        hasChanged = hasChanged || newControl !== control;\n        Object.assign(res, { [key]: newControl });\n      }\n      return res;\n    }, {} as FormGroupControls<TValue>);\n    return hasChanged ? newControls : state.controls;\n  };\n}\n\nfunction updateGroupSingle<TValue extends KeyValue>(updateFns: StateUpdateFns<TValue>) {\n  return (state: FormGroupState<TValue>): FormGroupState<TValue> => {\n    const newControls = updateGroupControlsState<TValue>(updateFns)(state);\n    return newControls !== state.controls\n      ? computeGroupState<TValue>(\n        state.id,\n        newControls,\n        state.value,\n        state.errors,\n        state.pendingValidations,\n        state.userDefinedProperties,\n        {\n          wasOrShouldBeDirty: state.isDirty,\n          wasOrShouldBeEnabled: state.isEnabled,\n          wasOrShouldBeTouched: state.isTouched,\n          wasOrShouldBeSubmitted: state.isSubmitted,\n        },\n      )\n      : state;\n  };\n}\n\n/**\n * This update function takes one or more update function objects and returns\n * a projection function that applies all objects one after another to a form\n * group state.\n *\n * The following (contrived) example uses this function to validate the child\n * control `name` to be required and set the child control `email`'s value to\n * be `''` if the name is invalid.\n *\n```typescript\ninterface FormValue {\n  name: string;\n  email: string;\n}\n\nconst groupUpdateFn = updateGroup<FormValue>(\n  {\n    name: validate<string>(required),\n  },\n  {\n    email: (email, parentGroup) =>\n      parentGroup.controls.name.isInvalid\n        ? setValue('', email)\n        : email,\n  },\n);\nconst updatedState = groupUpdateFn(state);\n```\n */\nexport function updateGroup<TValue>(\n  updateFn: StateUpdateFns<TValue>,\n  ...updateFnsArr: StateUpdateFns<TValue>[]\n): (state: FormGroupState<TValue>) => FormGroupState<TValue>;\n\n/**\n * This update function takes an array of update function objects and\n * returns a projection function that applies all objects one after another to\n * a form group state.\n *\n * The following (contrived) example uses this function to validate the child\n * control `name` to be required and set the child control `email`'s value to\n * be `''` if the name is invalid.\n *\n```typescript\ninterface FormValue {\n  name: string;\n  email: string;\n}\n\nconst groupUpdateFn = updateGroup<FormValue>(\n  [\n    {\n      name: validate<string>(required),\n    },\n    {\n      email: (email, parentGroup) =>\n        parentGroup.controls.name.isInvalid\n          ? setValue('', email)\n          : email,\n    },\n  ],\n);\nconst updatedState = groupUpdateFn(state);\n```\n */\nexport function updateGroup<TValue>(\n  updateFnsArr: StateUpdateFns<TValue>[],\n): (state: FormGroupState<TValue>) => FormGroupState<TValue>;\n\n/**\n * This update function takes a form group state and one or more update\n * function objects and applies all objects one after another to the state.\n * Providing multiple update function objects is mainly useful if the result\n * of a later object depends on the result of previous objects.\n *\n * The following (contrived) example uses this function to validate the child\n * control `name` to be required and set the child control `email`'s value to\n * be `''` if the name is invalid.\n *\n```typescript\ninterface FormValue {\n  name: string;\n  email: string;\n}\n\nconst updatedState = updateGroup<FormValue>(\n  state,\n  {\n    name: validate<string>(required),\n  },\n  {\n    email: (email, parentGroup) =>\n      parentGroup.controls.name.isInvalid\n        ? setValue('', email)\n        : email,\n  },\n);\n```\n */\nexport function updateGroup<TValue>(\n  state: FormGroupState<TValue>,\n  updateFn: StateUpdateFns<TValue>,\n  ...updateFnsArr: StateUpdateFns<TValue>[]\n): FormGroupState<TValue>;\n\n/**\n * This update function takes a form group state and an array of update\n * function objects and applies all objects one after another to the state.\n * Providing multiple update function objects is mainly useful if the result\n * of a later object depends on the result of previous objects.\n *\n * The following (contrived) example uses this function to validate the child\n * control `name` to be required and set the child control `email`'s value to\n * be `''` if the name is invalid.\n *\n```typescript\ninterface FormValue {\n  name: string;\n  email: string;\n}\n\nconst updatedState = updateGroup<FormValue>(\n  state,\n  [\n    {\n      name: validate<string>(required),\n    },\n    {\n      email: (email, parentGroup) =>\n        parentGroup.controls.name.isInvalid\n          ? setValue('', email)\n          : email,\n    },\n  ],\n);\n```\n */\nexport function updateGroup<TValue>(\n  state: FormGroupState<TValue>,\n  updateFnsArr: StateUpdateFns<TValue>[],\n): FormGroupState<TValue>;\n\nexport function updateGroup<TValue extends KeyValue>(\n  stateOrUpdateFnOrUpdateFnArray: FormGroupState<TValue> | StateUpdateFns<TValue> | StateUpdateFns<TValue>[],\n  updateFnOrUpdateFnArr?: StateUpdateFns<TValue> | StateUpdateFns<TValue>[],\n  ...rest: StateUpdateFns<TValue>[]\n) {\n  if (isGroupState<TValue>(stateOrUpdateFnOrUpdateFnArray)) {\n    const updateFnArr = Array.isArray(updateFnOrUpdateFnArr) ? updateFnOrUpdateFnArr : [updateFnOrUpdateFnArr!];\n    return updateFnArr.concat(...rest).reduce((s, updateFn) => updateGroupSingle<TValue>(updateFn)(s), stateOrUpdateFnOrUpdateFnArray);\n  }\n\n  let updateFnArr = Array.isArray(stateOrUpdateFnOrUpdateFnArray) ? stateOrUpdateFnOrUpdateFnArray : [stateOrUpdateFnOrUpdateFnArray];\n  updateFnArr = updateFnOrUpdateFnArr === undefined ? updateFnArr : updateFnArr.concat(updateFnOrUpdateFnArr);\n  return (s: FormGroupState<TValue>) => updateGroup<TValue>(ensureState(s), updateFnArr.concat(rest));\n}\n","import {\n  AbstractControlState,\n  FormState,\n  isArrayState,\n  isFormState,\n  isGroupState,\n} from '../state';\nimport { updateArray } from './update-array';\nimport { StateUpdateFns, updateGroup } from './update-group';\nimport { ensureState, ProjectFn2 } from './util';\n\nfunction updateRecursiveSingle(parent: AbstractControlState<any>, updateFn: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>) {\n  return (state: AbstractControlState<any>): AbstractControlState<any> => {\n    if (isGroupState(state)) {\n      const updateFunctions = Object.keys(state.controls).reduce((agg, key) => Object.assign(agg, {\n        [key]: (s: AbstractControlState<any>, p: AbstractControlState<any>) => updateRecursiveSingle(p, updateFn)(s),\n      }), {} as StateUpdateFns<any>);\n      state = updateGroup<any>(updateFunctions)(state);\n      return updateFn(state, parent);\n    }\n\n    if (isArrayState(state)) {\n      state = updateArray<any>((s, p) => updateRecursiveSingle(p, updateFn)(s))(state);\n      return updateFn(state, parent);\n    }\n\n    return updateFn(state, parent);\n  };\n}\n\n/**\n * This update function takes a form array state and one or more update\n * functions applies all update functions one after another to the state\n * recursively, i.e. the function is applied to the state's children,\n * their children etc.\n *\n * The following example uses this function to validate all controls in a\n * group or array as required.\n *\n ```typescript\n const updatedState = updateRecursive(\n   state,\n   validate<any>(required),\n );\n ```\n */\nexport function updateRecursive<TValue>(\n  state: AbstractControlState<TValue>,\n  updateFn: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>,\n  ...updateFnArr: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>[]\n): FormState<TValue>;\n\n/**\n * This update function takes a form array state and an array of\n * update functions applies all update functions one after another to the\n * state recursively, i.e. the function is applied to the state's children,\n * their children etc.\n *\n * The following example uses this function to validate all controls in a\n * group or array as required.\n *\n```typescript\nconst updatedState = updateRecursive(\n  state,\n  [validate<any>(required)],\n);\n```\n */\nexport function updateRecursive<TValue>(\n  state: AbstractControlState<TValue>,\n  updateFnArr: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>[],\n): FormState<TValue>;\n\n/**\n * This update function takes one or more update functions and returns a\n * projection function that applies all update functions one after another to\n * a form state.\n *\n * The following example uses this function to validate all controls in a\n * group as required.\n *\n```typescript\nconst updateFn = updateRecursive(validate<any>(required));\nconst updatedState = updateFn(state);\n```\n */\nexport function updateRecursive(\n  updateFn: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>,\n  ...updateFnArr: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>[]\n): <TValue>(state: AbstractControlState<TValue>) => FormState<TValue>;\n\n/**\n * This update function takes an array of update functions and returns\n * a projection function that applies all update functions one after another to\n * a form state.\n *\n * The following example uses this function to validate all controls in a\n * group as required.\n *\n```typescript\nconst updateFn = updateRecursive([validate<any>(required)]);\nconst updatedState = updateFn(state);\n```\n */\nexport function updateRecursive(\n  updateFnArr: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>[],\n): <TValue>(state: AbstractControlState<TValue>) => FormState<TValue>;\n\nexport function updateRecursive<TValue>(\n  stateOrFunctionOrFunctionArray:\n    | AbstractControlState<TValue>\n    | ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>\n    | ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>[],\n  updateFnOrUpdateFnArr?: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>> | ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>[],\n  ...rest: ProjectFn2<AbstractControlState<any>, AbstractControlState<any>>[]\n) {\n  if (isFormState(stateOrFunctionOrFunctionArray)) {\n    const updateFnArr = Array.isArray(updateFnOrUpdateFnArr) ? updateFnOrUpdateFnArr : [updateFnOrUpdateFnArr!];\n    return updateFnArr.concat(...rest)\n      .reduce((s, updateFn) => updateRecursiveSingle(stateOrFunctionOrFunctionArray, updateFn)(s), stateOrFunctionOrFunctionArray);\n  }\n\n  let updateFnArr = Array.isArray(stateOrFunctionOrFunctionArray) ? stateOrFunctionOrFunctionArray : [stateOrFunctionOrFunctionArray];\n  updateFnArr = updateFnOrUpdateFnArr === undefined ? updateFnArr : updateFnArr.concat(updateFnOrUpdateFnArr);\n  return (s: AbstractControlState<TValue>) => updateRecursive<TValue>(ensureState(s), updateFnArr.concat(rest));\n}\n","import { SetValueAction } from '../actions';\nimport { AbstractControlState, FormState, isFormState } from '../state';\nimport { abstractControlReducer, ensureState } from './util';\n\n/**\n * This update function takes a value and returns a projection function that\n * sets the value of a form state. Setting the value of a group or array will\n * also update the values of all children including adding and removing\n * children on the fly for added/removed properties/items.\n */\nexport function setValue<TValue>(value: TValue): (state: AbstractControlState<TValue>) => FormState<TValue>;\n\n/**\n * This update function takes a form state and a value and sets the value of\n * the state. Setting the value of a group or array will also update the\n * values of all children including adding and removing children on the fly\n * for added/removed properties/items.\n */\nexport function setValue<TValue>(state: AbstractControlState<TValue>, value: TValue): FormState<TValue>;\n\nexport function setValue<TValue>(valueOrState: TValue | AbstractControlState<TValue>, value?: TValue) {\n  if (isFormState(valueOrState)) {\n    return abstractControlReducer(valueOrState, new SetValueAction(valueOrState.id, value));\n  }\n\n  return (s: AbstractControlState<TValue>) => setValue(ensureState(s), valueOrState);\n}\n","import { SetErrorsAction } from '../actions';\nimport { formStateReducer } from '../reducer';\nimport { AbstractControlState, FormState, isFormState, ValidationErrors } from '../state';\nimport { ensureState } from './util';\n\n/**\n * This update function takes a form state and a number of error objects and sets the\n * errors of the state.\n */\nexport function setErrors<TValue>(\n  state: AbstractControlState<TValue>,\n  errors: ValidationErrors,\n  ...rest: ValidationErrors[]\n): FormState<TValue>;\n\n/**\n * This update function takes a form state and an array of error objects and sets the\n * errors of the state.\n */\nexport function setErrors<TValue>(\n  state: AbstractControlState<TValue>,\n  errorsArray: ValidationErrors[],\n): FormState<TValue>;\n\n/**\n * This update function takes a number of error objects and returns a projection\n * function that sets the errors of a form state.\n */\nexport function setErrors(errors: ValidationErrors, ...rest: ValidationErrors[]): <TValue>(state: AbstractControlState<TValue>) => FormState<TValue>;\n\n/**\n * This update function takes an array of error objects and returns a projection\n * function that sets the errors of a form state.\n */\nexport function setErrors(errorsArray: ValidationErrors[]): <TValue>(state: AbstractControlState<TValue>) => FormState<TValue>;\n\nexport function setErrors<TValue>(\n  errorsOrErrorsArrayOrState: ValidationErrors | ValidationErrors[] | FormState<TValue>,\n  errorsOrErrorsArray?: ValidationErrors | ValidationErrors[],\n  ...rest: ValidationErrors[]\n) {\n  if (isFormState<TValue>(errorsOrErrorsArrayOrState)) {\n    const errorsArray = Array.isArray(errorsOrErrorsArray) ? errorsOrErrorsArray : [errorsOrErrorsArray!];\n    const errors = errorsArray.concat(...rest).reduce((agg, err) => Object.assign(agg, err), {} as ValidationErrors);\n\n    return formStateReducer(errorsOrErrorsArrayOrState, new SetErrorsAction(errorsOrErrorsArrayOrState.id, errors));\n  }\n\n  let errorsArray = Array.isArray(errorsOrErrorsArrayOrState) ? errorsOrErrorsArrayOrState : [errorsOrErrorsArrayOrState];\n  errorsArray = errorsOrErrorsArray === undefined ? errorsArray : errorsArray.concat(errorsOrErrorsArray);\n  return (s: AbstractControlState<TValue>) => setErrors<TValue>(ensureState(s), errorsArray.concat(rest));\n}\n","import { SetErrorsAction } from '../actions';\nimport { formStateReducer } from '../reducer';\nimport { AbstractControlState, FormState, isFormState, ValidationErrors } from '../state';\nimport { ensureState } from './util';\n\nexport type ValidationFn<TValue> = (value: TValue) => ValidationErrors;\n\n/**\n * This update function takes one or more validation functions and a form\n * state and sets the errors of the state to the result of applying the\n * given validation function(s) to the state's value.\n */\nexport function validate<TValue>(\n  state: AbstractControlState<TValue>,\n  fn: ValidationFn<TValue>,\n  ...rest: ValidationFn<TValue>[]\n): FormState<TValue>;\n\n/**\n * This update function takes an array of validation functions and a form\n * state and sets the errors of the state to the result of applying the given\n * validation function(s) to the state's value.\n */\nexport function validate<TValue>(\n  state: AbstractControlState<TValue>,\n  rest: ValidationFn<TValue>[],\n): FormState<TValue>;\n\n/**\n * This update function takes one or more validation functions and returns\n * a projection function that sets the errors of a form state to the result\n * of applying the given validation function(s) to the state's value.\n */\nexport function validate<TValue>(\n  fn: ValidationFn<TValue>,\n  ...rest: ValidationFn<TValue>[]\n): (state: AbstractControlState<TValue>) => FormState<TValue>;\n\n/**\n * This update function takes an array of validation functions and returns a\n * projection function that sets the errors of a form state to the result of\n * applying the given validation function(s) to the state's value.\n */\nexport function validate<TValue>(\n  rest: ValidationFn<TValue>[],\n): (state: AbstractControlState<TValue>) => FormState<TValue>;\n\nexport function validate<TValue>(\n  stateOrFunctionOrFunctionArray: FormState<TValue> | ValidationFn<TValue> | ValidationFn<TValue>[],\n  functionOrFunctionArr?: ValidationFn<TValue> | ValidationFn<TValue>[],\n  ...rest: ValidationFn<TValue>[]\n) {\n  if (isFormState<TValue>(stateOrFunctionOrFunctionArray)) {\n    const functionArr = Array.isArray(functionOrFunctionArr) ? functionOrFunctionArr : [functionOrFunctionArr!];\n    const errors = functionArr.concat(...rest)\n      .reduce((agg, validationFn) => Object.assign(agg, validationFn(stateOrFunctionOrFunctionArray.value)), {} as ValidationErrors);\n    return formStateReducer<TValue>(stateOrFunctionOrFunctionArray, new SetErrorsAction(stateOrFunctionOrFunctionArray.id, errors));\n  }\n\n  let updateFnArr = Array.isArray(stateOrFunctionOrFunctionArray) ? stateOrFunctionOrFunctionArray : [stateOrFunctionOrFunctionArray];\n  updateFnArr = functionOrFunctionArr === undefined ? updateFnArr : updateFnArr.concat(functionOrFunctionArr);\n  return (s: AbstractControlState<TValue>) => validate<TValue>(ensureState(s), updateFnArr.concat(rest));\n}\n","import { EnableAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and enables it.\n */\nexport function enable<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and enables it and all of its children.\n */\nexport function enable<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and enables it and all of its children.\n */\nexport function enable<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a form state and enables it. For groups and arrays also\n * enables all children.\n */\nexport function enable<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function enable<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new EnableAction(state.id));\n}\n","import { DisableAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and disables it. Disabling a control\n * will clear all of its errors (i.e. making it always valid) and will remove all\n * pending validations (thereby effectively cancelling those validations).\n */\nexport function disable<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and disables it and all of its children.\n * Disabling a control will clear all of its errors (i.e. making it always valid) and\n * will remove all pending validations (thereby effectively cancelling those validations).\n */\nexport function disable<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and disables it and all of its children.\n * Disabling a control will clear all of its errors (i.e. making it always valid) and\n * will remove all pending validations (thereby effectively cancelling those validations).\n */\nexport function disable<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a form state and disables it. For groups and arrays also\n * disables all children. Disabling a control will clear all of its errors (i.e. making\n * it always valid) and will remove all pending validations (thereby effectively\n * cancelling those validations).\n */\nexport function disable<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function disable<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new DisableAction(state.id));\n}\n","import { MarkAsDirtyAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and marks it as dirty.\n */\nexport function markAsDirty<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and marks it and all of its children as dirty.\n */\nexport function markAsDirty<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and marks it and all of its children as dirty.\n */\nexport function markAsDirty<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a state and marks it as dirty. For groups and arrays this also marks\n * all children as dirty.\n */\nexport function markAsDirty<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function markAsDirty<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new MarkAsDirtyAction(state.id));\n}\n","import { MarkAsPristineAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and marks it as pristine.\n */\nexport function markAsPristine<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and marks it and all of its children as pristine.\n */\nexport function markAsPristine<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and marks it and all of its children as pristine.\n */\nexport function markAsPristine<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a state and marks it as pristine. For groups and arrays this also marks\n * all children as pristine.\n */\nexport function markAsPristine<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function markAsPristine<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new MarkAsPristineAction(state.id));\n}\n","import { MarkAsTouchedAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and marks it as touched.\n */\nexport function markAsTouched<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and marks it and all of its children as touched.\n */\nexport function markAsTouched<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and marks it and all of its children as touched.\n */\nexport function markAsTouched<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a state and marks it as touched. For groups and arrays this also marks\n * all children as touched.\n */\nexport function markAsTouched<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function markAsTouched<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new MarkAsTouchedAction(state.id));\n}\n","import { MarkAsUntouchedAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and marks it as untouched.\n */\nexport function markAsUntouched<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and marks it and all of its children as untouched.\n */\nexport function markAsUntouched<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and marks it and all of its children as untouched.\n */\nexport function markAsUntouched<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a state and marks it as untouched. For groups and arrays this also marks\n * all children as untouched.\n */\nexport function markAsUntouched<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function markAsUntouched<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new MarkAsUntouchedAction(state.id));\n}\n","import { MarkAsSubmittedAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and marks it as submitted.\n */\nexport function markAsSubmitted<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and marks it and all of its children as submitted.\n */\nexport function markAsSubmitted<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and marks it and all of its children as submitted.\n */\nexport function markAsSubmitted<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a state and marks it as submitted. For groups and arrays this also marks\n * all children as submitted.\n */\nexport function markAsSubmitted<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function markAsSubmitted<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new MarkAsSubmittedAction(state.id));\n}\n","import { MarkAsUnsubmittedAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and marks it as unsubmitted.\n */\nexport function markAsUnsubmitted<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and marks it and all of its children as unsubmitted.\n */\nexport function markAsUnsubmitted<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and marks it and all of its children as unsubmitted.\n */\nexport function markAsUnsubmitted<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a state and marks it as unsubmitted. For groups and arrays this also marks\n * all children as unsubmitted.\n */\nexport function markAsUnsubmitted<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function markAsUnsubmitted<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new MarkAsUnsubmittedAction(state.id));\n}\n","import { FocusAction } from '../actions';\nimport { formControlReducer } from '../control/reducer';\nimport { FormControlState, FormControlValueTypes } from '../state';\n\n/**\n * This update function takes a form control state and marks it as focused (which\n * will also `.focus()` the form element).\n */\nexport function focus<TValue extends FormControlValueTypes>(state: FormControlState<TValue>) {\n  return formControlReducer(state, new FocusAction(state.id));\n}\n","import { UnfocusAction } from '../actions';\nimport { formControlReducer } from '../control/reducer';\nimport { FormControlState, FormControlValueTypes } from '../state';\n\n/**\n * This update function takes a form control state and marks it as not focused (which\n * will also `.blur()` the form element).\n */\nexport function unfocus<TValue extends FormControlValueTypes>(state: FormControlState<TValue>) {\n  return formControlReducer(state, new UnfocusAction(state.id));\n}\n","import { AddArrayControlAction } from '../actions';\nimport { formArrayReducer } from '../array/reducer';\nimport { FormArrayState, isArrayState } from '../state';\nimport { ensureState } from './util';\n\n/**\n * This update function takes a value and optionally an index and returns a projection function\n * that adds a child control at the given index or at the end of a form array state.\n */\nexport function addArrayControl<TValue>(value: TValue, index?: number): (state: FormArrayState<TValue>) => FormArrayState<TValue>;\n\n/**\n * This update function takes an array form state, a value, and optionally an index and adds a\n * child control at the given index or at the end of the state.\n */\nexport function addArrayControl<TValue>(state: FormArrayState<TValue>, value: TValue, index?: number): FormArrayState<TValue>;\n\nexport function addArrayControl<TValue>(valueOrState: TValue | FormArrayState<TValue>, indexOrValue: number | TValue | undefined, index?: number) {\n  if (isArrayState(valueOrState)) {\n    return formArrayReducer(valueOrState, new AddArrayControlAction(valueOrState.id, indexOrValue as TValue, index));\n  }\n\n  return (s: FormArrayState<TValue>) => addArrayControl(ensureState(s), valueOrState as TValue, indexOrValue as number);\n}\n","import { AddGroupControlAction } from '../actions';\nimport { formGroupReducer } from '../group/reducer';\nimport { FormGroupState, isGroupState, KeyValue } from '../state';\nimport { ensureState } from './util';\n\n/**\n * This update function takes a name and a value and returns a projection function\n * that adds a child control with the given name and value to a form group state.\n */\nexport function addGroupControl<TValue extends KeyValue, TControlKey extends keyof TValue = keyof TValue>(\n  name: TControlKey,\n  value: TValue[TControlKey],\n): (state: FormGroupState<TValue>) => FormGroupState<TValue>;\n\n/**\n * This update function takes a form group state, a name, and a value, and adds a child\n * control with the given name and value to the form group state.\n */\nexport function addGroupControl<TValue extends KeyValue, TControlKey extends keyof TValue = keyof TValue>(\n  state: FormGroupState<TValue>,\n  name: TControlKey,\n  value: TValue[TControlKey],\n): FormGroupState<TValue>;\n\nexport function addGroupControl<TValue extends KeyValue, TControlKey extends keyof TValue = keyof TValue>(\n  nameOrState: TControlKey | FormGroupState<TValue>,\n  valueOrName: TValue[TControlKey] | TControlKey,\n  value?: TValue[TControlKey],\n) {\n  if (isGroupState(nameOrState)) {\n    return formGroupReducer(nameOrState, new AddGroupControlAction<TValue, TControlKey>(nameOrState.id, valueOrName as TControlKey, value!));\n  }\n\n  return (s: FormGroupState<TValue>) => addGroupControl(ensureState(s), nameOrState as TControlKey, valueOrName as TValue[TControlKey]);\n}\n","import { RemoveArrayControlAction } from '../actions';\nimport { formArrayReducer } from '../array/reducer';\nimport { FormArrayState, isArrayState } from '../state';\nimport { ensureState } from './util';\n\n/**\n * This update function takes an index and returns a projection function\n * that removes the child control at the given index from a form array state.\n */\nexport function removeArrayControl(index: number): <TValue>(state: FormArrayState<TValue>) => FormArrayState<TValue>;\n\n/**\n * This update function takes an array form state and an index and removes the\n * child control at the given index from the state.\n */\nexport function removeArrayControl<TValue>(state: FormArrayState<TValue>, index: number): FormArrayState<TValue>;\n\nexport function removeArrayControl<TValue>(indexOrState: number | FormArrayState<TValue>, index?: number) {\n  if (isArrayState(indexOrState)) {\n    return formArrayReducer(indexOrState, new RemoveArrayControlAction(indexOrState.id, index!));\n  }\n\n  return (s: FormArrayState<TValue>) => removeArrayControl(ensureState(s), indexOrState as number);\n}\n","import { RemoveGroupControlAction } from '../actions';\nimport { formGroupReducer } from '../group/reducer';\nimport { FormGroupState, isGroupState, KeyValue } from '../state';\nimport { ensureState } from './util';\n\n/**\n * This update function takes a name and returns a projection function\n * that removes the child control with the given name from a form group state.\n */\nexport function removeGroupControl<TValue extends KeyValue>(name: keyof TValue): (state: FormGroupState<TValue>) => FormGroupState<TValue>;\n\n/**\n * This update function takes a group form state and a name and removes the\n * child control with the given name from the state.\n */\nexport function removeGroupControl<TValue extends KeyValue>(state: FormGroupState<TValue>, name: keyof TValue): FormGroupState<TValue>;\n\nexport function removeGroupControl<TValue extends KeyValue>(nameOrState: keyof TValue | FormGroupState<TValue>, name?: keyof TValue) {\n  if (isGroupState(nameOrState)) {\n    return formGroupReducer(nameOrState, new RemoveGroupControlAction<TValue>(nameOrState.id, name!));\n  }\n\n  return (s: FormGroupState<TValue>) => removeGroupControl(ensureState(s), nameOrState as keyof TValue);\n}\n","import { SetUserDefinedPropertyAction } from '../actions';\nimport { formStateReducer } from '../reducer';\nimport { AbstractControlState, FormState, isFormState } from '../state';\nimport { ensureState } from './util';\n\n/**\n * This update function takes a name and a value and returns a projection\n * function that sets a user-defined property on a form state.\n */\nexport function setUserDefinedProperty(name: string, value: any): <TValue>(state: AbstractControlState<TValue>) => FormState<TValue>;\n\n/**\n * This update function takes a form state, a name, and a value and sets\n * a user-defined property on the state.\n */\nexport function setUserDefinedProperty<TValue>(state: AbstractControlState<TValue>, name: string, value: any): FormState<TValue>;\n\nexport function setUserDefinedProperty<TValue>(nameOrState: string | FormState<TValue>, valueOrName: any | string, value?: any) {\n  if (isFormState<TValue>(nameOrState)) {\n    return formStateReducer(nameOrState, new SetUserDefinedPropertyAction(nameOrState.id, valueOrName, value));\n  }\n\n  return (s: AbstractControlState<TValue>) => setUserDefinedProperty(ensureState(s), nameOrState, valueOrName);\n}\n","import { ResetAction } from '../actions';\nimport { AbstractControlState, FormArrayState, FormControlState, FormControlValueTypes, FormGroupState, FormState } from '../state';\nimport { abstractControlReducer } from './util';\n\n/**\n * This update function takes a form control state and marks it as pristine,\n * untouched, and unsubmitted.\n */\nexport function reset<TValue extends FormControlValueTypes>(state: FormControlState<TValue>): FormControlState<TValue>;\n\n/**\n * This update function takes a form array state and marks it and all of its\n * children as pristine, untouched, and unsubmitted.\n */\nexport function reset<TValue>(state: FormArrayState<TValue>): FormArrayState<TValue>;\n\n/**\n * This update function takes a form group state and marks it and all of its\n * children as pristine, untouched, and unsubmitted.\n */\nexport function reset<TValue>(state: FormGroupState<TValue>): FormGroupState<TValue>;\n\n/**\n * This update function takes a state and marks it as pristine, untouched, and\n * unsubmitted. For groups and arrays this also marks all children as pristine,\n * untouched, and unsubmitted.\n */\nexport function reset<TValue>(state: AbstractControlState<TValue>): FormState<TValue>;\n\nexport function reset<TValue>(state: AbstractControlState<TValue>) {\n  return abstractControlReducer(state, new ResetAction(state.id));\n}\n","import { StartAsyncValidationAction } from '../actions';\nimport { AbstractControlState, FormState, isFormState } from '../state';\nimport { abstractControlReducer, ensureState } from './util';\n\n/**\n * This update function takes a name and returns a projection function that\n * marks the async validation for the given name as pending.\n */\nexport function startAsyncValidation(name: string): <TValue>(state: AbstractControlState<TValue>) => FormState<TValue>;\n\n/**\n * This update function takes a form state and a name and marks the async\n * validation for the given name as pending.\n */\nexport function startAsyncValidation<TValue>(state: AbstractControlState<TValue>, name: string): FormState<TValue>;\n\nexport function startAsyncValidation<TValue>(nameOrState: string | AbstractControlState<TValue>, name?: string) {\n  if (isFormState(nameOrState)) {\n    return abstractControlReducer(nameOrState, new StartAsyncValidationAction(nameOrState.id, name!));\n  }\n\n  return (s: AbstractControlState<TValue>) => startAsyncValidation(ensureState(s), nameOrState);\n}\n","import { SetAsyncErrorAction } from '../actions';\nimport { AbstractControlState, FormState, isFormState } from '../state';\nimport { abstractControlReducer, ensureState } from './util';\n\n/**\n * This update function takes a name and a value and returns a projection\n * function that sets the async error for the given name to the given value.\n * It also marks the validation for the name as not pending anymore if it\n * was pending.\n */\nexport function setAsyncError(name: string, value: any): <TValue>(state: AbstractControlState<TValue>) => FormState<TValue>;\n\n/**\n * This update function takes a form state, a name, and a value and sets the\n * async error for the given name to the given value. It also marks the\n * validation for the name as not pending anymore if it was pending.\n */\nexport function setAsyncError<TValue>(state: AbstractControlState<TValue>, name: string, value: any): FormState<TValue>;\n\nexport function setAsyncError<TValue>(nameOrState: string | AbstractControlState<TValue>, nameOrValue?: string | any, value?: any) {\n  if (isFormState(nameOrState)) {\n    return abstractControlReducer(nameOrState, new SetAsyncErrorAction(nameOrState.id, nameOrValue, value));\n  }\n\n  return (s: AbstractControlState<TValue>) => setAsyncError(ensureState(s), nameOrState, nameOrValue);\n}\n","import { ClearAsyncErrorAction } from '../actions';\nimport { AbstractControlState, FormState, isFormState } from '../state';\nimport { abstractControlReducer, ensureState } from './util';\n\n/**\n * This update function takes a name and returns a projection function that\n * clears the async error with the given name.\n */\nexport function clearAsyncError(name: string): <TValue>(state: AbstractControlState<TValue>) => FormState<TValue>;\n\n/**\n * This update function takes a form state and a name, and clears the async\n * error with the given name.\n */\nexport function clearAsyncError<TValue>(state: AbstractControlState<TValue>, name: string): FormState<TValue>;\n\nexport function clearAsyncError<TValue>(nameOrState: string | AbstractControlState<TValue>, name?: string) {\n  if (isFormState(nameOrState)) {\n    return abstractControlReducer(nameOrState, new ClearAsyncErrorAction(nameOrState.id, name!));\n  }\n\n  return (s: AbstractControlState<TValue>) => clearAsyncError(ensureState(s), nameOrState);\n}\n","import { InjectionToken } from '@angular/core';\n\nexport interface FormViewAdapter {\n  /**\n   * Sets a new value for the form element.\n   */\n  setViewValue(value: any): void;\n\n  /**\n   * Set the function to be called when the form element receives a change event.\n   */\n  setOnChangeCallback(fn: (value: any) => void): void;\n\n  /**\n   * Set the function to be called when the form element receives a touch event.\n   */\n  setOnTouchedCallback(fn: () => void): void;\n\n  /**\n   * Enable or disable the form element.\n   */\n  setIsDisabled?(isDisabled: boolean): void;\n}\n\n/**\n * Used to provide a {@link FormViewAdapter} for form elements.\n */\nexport const NGRX_FORM_VIEW_ADAPTER = new InjectionToken<FormViewAdapter>('NgrxFormViewAdapter');\n","import { AfterViewInit, Directive, ElementRef, forwardRef, HostListener, Input, Renderer2 } from '@angular/core';\n\nimport { FormControlState } from '../state';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from './view-adapter';\n\n// tslint:disable:directive-class-suffix\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'input[type=checkbox][ngrxFormControlState]',\n  providers: [{\n    provide: NGRX_FORM_VIEW_ADAPTER,\n    useExisting: forwardRef(() => NgrxCheckboxViewAdapter),\n    multi: true,\n  }],\n})\nexport class NgrxCheckboxViewAdapter implements FormViewAdapter, AfterViewInit {\n  private state: FormControlState<any>;\n  private nativeIdWasSet = false;\n\n  onChange: (value: any) => void = () => void 0;\n\n  @HostListener('blur')\n  onTouched: () => void = () => void 0\n\n  @Input() set ngrxFormControlState(value: FormControlState<any>) {\n    if (!value) {\n      throw new Error('The control state must not be undefined!');\n    }\n\n    this.state = value;\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = value.id !== nativeId && this.nativeIdWasSet;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', value.id);\n    }\n  }\n\n  constructor(private renderer: Renderer2, private elementRef: ElementRef) { }\n\n  ngAfterViewInit() {\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = this.state.id !== nativeId && !nativeId;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', this.state.id);\n      this.nativeIdWasSet = true;\n    }\n  }\n\n  setViewValue(value: any): void {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'checked', value);\n  }\n\n  setOnChangeCallback(fn: (value: any) => void): void {\n    this.onChange = fn;\n  }\n\n  setOnTouchedCallback(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setIsDisabled(isDisabled: boolean): void {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  @HostListener('change', ['$event'])\n  handleInput({ target }: { target: HTMLInputElement }): void {\n    this.onChange(target.checked);\n  }\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { AfterViewInit, Directive, ElementRef, forwardRef, HostListener, Inject, Input, Optional, PLATFORM_ID, Renderer2 } from '@angular/core';\n\nimport { FormControlState } from '../state';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from './view-adapter';\n\nexport interface Navigator {\n  userAgent: string;\n}\n\n/**\n * We must check whether the agent is Android because composition events\n * behave differently between iOS and Android.\n */\nfunction isAndroid(navigator: Navigator): boolean {\n  return /android (\\d+)/.test(navigator.userAgent.toLowerCase());\n}\n\n// tslint:disable:directive-class-suffix\n// tslint:disable:directive-selector\n\n// TODO: since this directive has a side-effect (setting the element's id attribute)\n// it should not blacklist other types of inputs but instead it should somehow figure\n// out whether it is the \"active\" view adapter and only perform its side effects if it\n// is active\n@Directive({\n  selector: 'input:not([type=checkbox]):not([type=number]):not([type=radio]):not([type=range])[ngrxFormControlState],textarea[ngrxFormControlState]',\n  providers: [{\n    provide: NGRX_FORM_VIEW_ADAPTER,\n    useExisting: forwardRef(() => NgrxDefaultViewAdapter),\n    multi: true,\n  }],\n})\nexport class NgrxDefaultViewAdapter implements FormViewAdapter, AfterViewInit {\n  private state: FormControlState<any>;\n  private nativeIdWasSet = false;\n\n  onChange: (value: any) => void = () => void 0;\n\n  @HostListener('blur')\n  onTouched: () => void = () => void 0\n\n  @Input() set ngrxFormControlState(value: FormControlState<any>) {\n    if (!value) {\n      throw new Error('The control state must not be undefined!');\n    }\n\n    this.state = value;\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = value.id !== nativeId && this.nativeIdWasSet;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', value.id);\n    }\n  }\n\n  /** Whether the user is creating a composition string (IME events). */\n  private isComposing = false;\n  private isCompositionSupported: boolean;\n\n  constructor(\n    private renderer: Renderer2,\n    private elementRef: ElementRef,\n    @Optional() @Inject(PLATFORM_ID) private platformId: string | null = null,\n    // we use a special injection string that should never exist at runtime to allow mocking this dependency for testing\n    @Optional() @Inject('ngrx-forms/never') navigator: Navigator | null = null,\n  ) {\n    this.isCompositionSupported = isPlatformBrowser(this.platformId || '') && !isAndroid(navigator || window.navigator);\n  }\n\n  ngAfterViewInit() {\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = this.state.id !== nativeId && !nativeId;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', this.state.id);\n      this.nativeIdWasSet = true;\n    }\n  }\n\n  setViewValue(value: any): void {\n    const normalizedValue = value == null ? '' : value;\n    this.renderer.setProperty(this.elementRef.nativeElement, 'value', normalizedValue);\n  }\n\n  setOnChangeCallback(fn: (value: any) => void): void {\n    this.onChange = fn;\n  }\n\n  setOnTouchedCallback(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setIsDisabled(isDisabled: boolean): void {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  @HostListener('input', ['$event'])\n  handleInput({ target }: { target: HTMLInputElement }): void {\n    if (this.isCompositionSupported && this.isComposing) {\n      return;\n    }\n\n    this.onChange(target.value);\n  }\n\n  @HostListener('compositionstart')\n  compositionStart(): void {\n    this.isComposing = true;\n  }\n\n  @HostListener('compositionend', ['$event'])\n  compositionEnd({ target }: { target: HTMLInputElement }): void {\n    this.isComposing = false;\n    if (this.isCompositionSupported) {\n      this.onChange(target.value);\n    }\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, forwardRef, HostListener, Input, Renderer2 } from '@angular/core';\n\nimport { FormControlState } from '../state';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from './view-adapter';\n\n// tslint:disable:directive-class-suffix\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'input[type=number][ngrxFormControlState]',\n  providers: [{\n    provide: NGRX_FORM_VIEW_ADAPTER,\n    useExisting: forwardRef(() => NgrxNumberViewAdapter),\n    multi: true,\n  }],\n})\nexport class NgrxNumberViewAdapter implements FormViewAdapter, AfterViewInit {\n  private state: FormControlState<any>;\n  private nativeIdWasSet = false;\n\n  onChange: (value: any) => void = () => void 0;\n\n  @HostListener('blur')\n  onTouched: () => void = () => void 0\n\n  @Input() set ngrxFormControlState(value: FormControlState<any>) {\n    if (!value) {\n      throw new Error('The control state must not be undefined!');\n    }\n\n    this.state = value;\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = value.id !== nativeId && this.nativeIdWasSet;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', value.id);\n    }\n  }\n\n  constructor(private renderer: Renderer2, private elementRef: ElementRef) { }\n\n  ngAfterViewInit() {\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = this.state.id !== nativeId && !nativeId;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', this.state.id);\n      this.nativeIdWasSet = true;\n    }\n  }\n\n  setViewValue(value: any): void {\n    // The value needs to be normalized for IE9, otherwise it is set to 'null' when null\n    const normalizedValue = value === null ? '' : value;\n    this.renderer.setProperty(this.elementRef.nativeElement, 'value', normalizedValue);\n  }\n\n  setOnChangeCallback(fn: (value: any) => void): void {\n    this.onChange = fn;\n  }\n\n  setOnTouchedCallback(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setIsDisabled(isDisabled: boolean): void {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  @HostListener('change', ['$event'])\n  @HostListener('input', ['$event'])\n  handleInput({ target }: { target: HTMLInputElement }): void {\n    const value = target.value;\n    this.onChange(value === '' ? null : parseFloat(value));\n  }\n}\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  forwardRef,\n  Host,\n  HostListener,\n  Input,\n  OnDestroy,\n  Optional,\n  Renderer2,\n} from '@angular/core';\n\nimport { FormControlState } from '../state';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from './view-adapter';\n\n// tslint:disable:directive-class-suffix\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'select:not([multiple])[ngrxFormControlState]',\n  providers: [{\n    provide: NGRX_FORM_VIEW_ADAPTER,\n    useExisting: forwardRef(() => NgrxSelectViewAdapter),\n    multi: true,\n  }],\n})\nexport class NgrxSelectViewAdapter implements FormViewAdapter, AfterViewInit {\n  private state: FormControlState<any>;\n  private optionMap: { [id: string]: any } = {};\n  private idCounter = 0;\n  private selectedId: string | null = null;\n  private value: any = undefined;\n  private nativeIdWasSet = false;\n\n  onChangeFn: (value: any) => void = () => void 0;\n\n  @HostListener('blur')\n  onTouched: () => void = () => void 0\n\n  @Input() set ngrxFormControlState(value: FormControlState<any>) {\n    if (!value) {\n      throw new Error('The control state must not be undefined!');\n    }\n\n    this.state = value;\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = value.id !== nativeId && this.nativeIdWasSet;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', value.id);\n    }\n  }\n\n  constructor(private renderer: Renderer2, private elementRef: ElementRef) { }\n\n  ngAfterViewInit() {\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = this.state.id !== nativeId && !nativeId;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', this.state.id);\n      this.nativeIdWasSet = true;\n    }\n  }\n\n  setViewValue(value: any) {\n    this.value = value;\n    this.selectedId = this.getOptionId(value);\n    if (this.selectedId === null) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'selectedIndex', -1);\n    }\n\n    this.renderer.setProperty(this.elementRef.nativeElement, 'value', this.selectedId);\n  }\n\n  @HostListener('change', ['$event'])\n  onChange({ target }: { target: HTMLOptionElement }) {\n    this.selectedId = target.value;\n    const value = this.optionMap[this.selectedId];\n    this.value = value;\n    this.onChangeFn(value);\n  }\n\n  setOnChangeCallback(fn: (value: any) => void) {\n    this.onChangeFn = fn;\n  }\n\n  setOnTouchedCallback(fn: () => void) {\n    this.onTouched = fn;\n  }\n\n  setIsDisabled(isDisabled: boolean) {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  createOptionId() {\n    const id = this.idCounter.toString();\n    this.idCounter += 1;\n    return id;\n  }\n\n  updateOptionValue(id: string, value: any) {\n    this.optionMap[id] = value;\n\n    if (this.selectedId === id) {\n      this.onChangeFn(value);\n    } else if (value === this.value) {\n      this.setViewValue(value);\n    }\n  }\n\n  deregisterOption(id: string) {\n    delete this.optionMap[id];\n  }\n\n  private getOptionId(value: any) {\n    for (const id of Array.from(Object.keys(this.optionMap))) {\n      if (this.optionMap[id] === value) {\n        return id;\n      }\n    }\n\n    return null;\n  }\n}\n\nconst NULL_VIEW_ADAPTER: NgrxSelectViewAdapter = {\n  createOptionId: () => '',\n  deregisterOption: () => void 0,\n  updateOptionValue: () => void 0,\n} as any;\n\nconst NULL_RENDERER: Renderer2 = {\n  setProperty: () => void 0,\n} as any;\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'option',\n})\nexport class NgrxSelectOption implements OnDestroy {\n  private isInitialized = false;\n  id: string;\n\n  constructor(\n    private element: ElementRef,\n    private renderer: Renderer2,\n    @Host() @Optional() private viewAdapter: NgrxSelectViewAdapter,\n  ) {\n    this.renderer = viewAdapter ? renderer : NULL_RENDERER;\n    this.viewAdapter = viewAdapter || NULL_VIEW_ADAPTER;\n    this.id = this.viewAdapter.createOptionId();\n  }\n\n  @Input('value')\n  set value(value: any) {\n    // this cannot be done inside ngOnInit since the value property\n    // must be already set when the option value is updated in the view\n    // adapter and the initial binding of 'value' happens before\n    // ngOnInit runs\n    if (!this.isInitialized) {\n      this.isInitialized = true;\n      this.renderer.setProperty(this.element.nativeElement, 'value', this.id);\n    }\n\n    this.viewAdapter.updateOptionValue(this.id, value);\n  }\n\n  ngOnDestroy(): void {\n    this.viewAdapter.deregisterOption(this.id);\n  }\n}\n","import {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  forwardRef,\n  Host,\n  HostListener,\n  Input,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Renderer2,\n} from '@angular/core';\n\nimport { FormControlState } from '../state';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from './view-adapter';\n\n// tslint:disable:directive-class-suffix\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'select[multiple][ngrxFormControlState]',\n  providers: [{\n    provide: NGRX_FORM_VIEW_ADAPTER,\n    useExisting: forwardRef(() => NgrxSelectMultipleViewAdapter),\n    multi: true,\n  }],\n})\nexport class NgrxSelectMultipleViewAdapter implements FormViewAdapter, AfterViewInit {\n  private state: FormControlState<any>;\n  private options: { [id: string]: NgrxSelectMultipleOption } = {};\n  private optionValues: { [id: string]: any } = {};\n  private idCounter = 0;\n  private selectedIds: string[] = [];\n  private nativeIdWasSet = false;\n\n  onChangeFn: (value: any) => void = () => void 0;\n\n  @HostListener('blur')\n  onTouched: () => void = () => void 0\n\n  @Input() set ngrxFormControlState(value: FormControlState<any>) {\n    if (!value) {\n      throw new Error('The control state must not be undefined!');\n    }\n\n    this.state = value;\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = value.id !== nativeId && this.nativeIdWasSet;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', value.id);\n    }\n  }\n\n  constructor(private renderer: Renderer2, private elementRef: ElementRef) { }\n\n  ngAfterViewInit() {\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = this.state.id !== nativeId && !nativeId;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', this.state.id);\n      this.nativeIdWasSet = true;\n    }\n  }\n\n  setViewValue(value: any) {\n    if (value === null) {\n      value = [];\n    }\n\n    if (!Array.isArray(value)) {\n      throw new Error(`the value provided to a NgrxSelectMultipleViewAdapter must be null or an array; got ${value} of type ${typeof value}`); // `\n    }\n\n    this.selectedIds = value.map(v => this.getOptionId(v)).filter(id => id !== null).map(id => id as string);\n    Object.keys(this.options).forEach(id => this.options[id].isSelected = this.selectedIds.indexOf(id) >= 0);\n  }\n\n  @HostListener('change')\n  onChange() {\n    this.selectedIds = Object.keys(this.options).filter(id => this.options[id].isSelected);\n    const value = this.selectedIds.map(id => this.optionValues[id]);\n    this.onChangeFn(value);\n  }\n\n  setOnChangeCallback(fn: (value: any) => void) {\n    this.onChangeFn = fn;\n  }\n\n  setOnTouchedCallback(fn: () => void) {\n    this.onTouched = fn;\n  }\n\n  setIsDisabled(isDisabled: boolean) {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  registerOption(option: NgrxSelectMultipleOption) {\n    const id = this.idCounter.toString();\n    this.options[id] = option;\n    this.idCounter += 1;\n    return id;\n  }\n\n  updateOptionValue(id: string, value: any) {\n    this.optionValues[id] = value;\n\n    if (this.selectedIds.indexOf(id) >= 0) {\n      this.onChange();\n    }\n  }\n\n  deregisterOption(id: string) {\n    delete this.options[id];\n    delete this.optionValues[id];\n  }\n\n  private getOptionId(value: any) {\n    for (const id of Array.from(Object.keys(this.optionValues))) {\n      if (this.optionValues[id] === value) {\n        return id;\n      }\n    }\n\n    return null;\n  }\n}\n\nconst NULL_VIEW_ADAPTER: NgrxSelectMultipleViewAdapter = {\n  registerOption: () => '',\n  deregisterOption: () => void 0,\n  updateOptionValue: () => void 0,\n} as any;\n\nconst NULL_RENDERER: Renderer2 = {\n  setProperty: () => void 0,\n} as any;\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'option',\n})\nexport class NgrxSelectMultipleOption implements OnInit, OnDestroy {\n  id: string;\n\n  constructor(\n    private element: ElementRef,\n    private renderer: Renderer2,\n    @Host() @Optional() private viewAdapter: NgrxSelectMultipleViewAdapter,\n  ) {\n    this.renderer = viewAdapter ? renderer : NULL_RENDERER;\n    this.viewAdapter = viewAdapter || NULL_VIEW_ADAPTER;\n    this.id = this.viewAdapter.registerOption(this);\n  }\n\n  @Input('value')\n  set value(value: any) {\n    this.viewAdapter.updateOptionValue(this.id, value);\n  }\n\n  set isSelected(selected: boolean) {\n    this.renderer.setProperty(this.element.nativeElement, 'selected', selected);\n  }\n\n  get isSelected() {\n    return (this.element.nativeElement as HTMLOptionElement).selected;\n  }\n\n  ngOnInit() {\n    this.renderer.setProperty(this.element.nativeElement, 'value', this.id);\n  }\n\n  ngOnDestroy(): void {\n    this.viewAdapter.deregisterOption(this.id);\n  }\n}\n","import {\n  Directive,\n  ElementRef,\n  Host,\n  Input,\n  Optional,\n  Renderer2,\n} from '@angular/core';\n\nimport { NgrxSelectViewAdapter } from './select';\nimport { NgrxSelectMultipleViewAdapter } from './select-multiple';\n\n// tslint:disable:directive-class-suffix\n\nconst NULL_RENDERER: Renderer2 = {\n  setProperty: () => void 0,\n} as any;\n\n/**\n * This directive is necessary to restore the default behaviour of Angular\n * when an `option` is used without an **ngrx-forms** form state. Since it\n * is not possible to select an element with a selector that considers its\n * parent the `option` directives for `select` and `select[multiple]` will\n * always be applied and therefore overriding the `[value]` binding which\n * disabled Angular's normal behaviour. This directive restores this\n * behaviour if no `select` or `select[multiple]` view adapter is found.\n * This is not a perfect solution since it may interfere with other\n * directives that try to set the `[value]` but that is very unlikely.\n */\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'option',\n})\nexport class NgrxFallbackSelectOption {\n  constructor(\n    private element: ElementRef,\n    private renderer: Renderer2,\n    @Host() @Optional() viewAdapter: NgrxSelectViewAdapter,\n    @Host() @Optional() multipleViewAdapter: NgrxSelectMultipleViewAdapter,\n  ) {\n    this.renderer = viewAdapter || multipleViewAdapter ? NULL_RENDERER : renderer;\n  }\n\n  @Input('value')\n  set value(value: any) {\n    this.renderer.setProperty(this.element.nativeElement, 'value', value);\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, forwardRef, HostListener, Input, OnInit, Renderer2 } from '@angular/core';\n\nimport { FormControlState } from '../state';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from './view-adapter';\n\n// tslint:disable:directive-class-suffix\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'input[type=radio][ngrxFormControlState]',\n  providers: [{\n    provide: NGRX_FORM_VIEW_ADAPTER,\n    useExisting: forwardRef(() => NgrxRadioViewAdapter),\n    multi: true,\n  }],\n})\nexport class NgrxRadioViewAdapter implements FormViewAdapter, OnInit, AfterViewInit {\n  private state: FormControlState<any>;\n  private nativeNameWasSet = false;\n\n  @Input() set value(val: any) {\n    if (val !== this.latestValue) {\n      this.latestValue = val;\n      if (this.isChecked) {\n        this.onChange();\n      }\n    }\n  }\n\n  @Input() set ngrxFormControlState(value: FormControlState<any>) {\n    if (!value) {\n      throw new Error('The control state must not be undefined!');\n    }\n\n    this.state = value;\n    const nativeName = this.elementRef.nativeElement.name;\n    const shouldSetNativeName = value.id !== nativeName && this.nativeNameWasSet;\n    if (shouldSetNativeName) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'name', value.id);\n    }\n  }\n\n  private latestValue: any;\n  private isChecked: boolean;\n\n  @HostListener('change')\n  onChange: () => void = () => void 0\n\n  @HostListener('blur')\n  onTouched: () => void = () => void 0\n\n  constructor(\n    private renderer: Renderer2,\n    private elementRef: ElementRef,\n  ) { }\n\n  ngOnInit() {\n    this.isChecked = (this.elementRef.nativeElement as HTMLInputElement).checked;\n  }\n\n  ngAfterViewInit() {\n    const nativeName = this.elementRef.nativeElement.name;\n    const shouldSetNativeName = this.state.id !== nativeName && !nativeName;\n    if (shouldSetNativeName) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'name', this.state.id);\n      this.nativeNameWasSet = true;\n    }\n  }\n\n  setViewValue(value: any): void {\n    this.isChecked = value === this.latestValue;\n    this.renderer.setProperty(this.elementRef.nativeElement, 'checked', this.isChecked);\n  }\n\n  setOnChangeCallback(fn: (_: any) => void): void {\n    this.onChange = () => fn(this.latestValue);\n  }\n\n  setOnTouchedCallback(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setIsDisabled(isDisabled: boolean): void {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n}\n","import { AfterViewInit, Directive, ElementRef, forwardRef, HostListener, Input, Renderer2 } from '@angular/core';\n\nimport { FormControlState } from '../state';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from './view-adapter';\n\n// tslint:disable:directive-class-suffix\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'input[type=range][ngrxFormControlState]',\n  providers: [{\n    provide: NGRX_FORM_VIEW_ADAPTER,\n    useExisting: forwardRef(() => NgrxRangeViewAdapter),\n    multi: true,\n  }],\n})\nexport class NgrxRangeViewAdapter implements FormViewAdapter, AfterViewInit {\n  private state: FormControlState<any>;\n  private nativeIdWasSet = false;\n\n  onChange: (value: any) => void = () => void 0;\n\n  @HostListener('blur')\n  onTouched: () => void = () => void 0\n\n  @Input() set ngrxFormControlState(value: FormControlState<any>) {\n    if (!value) {\n      throw new Error('The control state must not be undefined!');\n    }\n\n    this.state = value;\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = value.id !== nativeId && this.nativeIdWasSet;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', value.id);\n    }\n  }\n\n  constructor(private renderer: Renderer2, private elementRef: ElementRef) { }\n\n  ngAfterViewInit() {\n    const nativeId = this.elementRef.nativeElement.id;\n    const shouldSetNativeId = this.state.id !== nativeId && !nativeId;\n    if (shouldSetNativeId) {\n      this.renderer.setProperty(this.elementRef.nativeElement, 'id', this.state.id);\n      this.nativeIdWasSet = true;\n    }\n  }\n\n  setViewValue(value: any): void {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'value', parseFloat(value));\n  }\n\n  setOnChangeCallback(fn: (value: any) => void): void {\n    this.onChange = fn;\n  }\n\n  setOnTouchedCallback(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  setIsDisabled(isDisabled: boolean): void {\n    this.renderer.setProperty(this.elementRef.nativeElement, 'disabled', isDisabled);\n  }\n\n  @HostListener('change', ['$event'])\n  @HostListener('input', ['$event'])\n  handleInput({ target }: { target: HTMLInputElement }): void {\n    const value = target.value;\n    this.onChange(value === '' ? null : parseFloat(value));\n  }\n}\n","import { NgrxCheckboxViewAdapter } from './checkbox';\nimport { NgrxDefaultViewAdapter } from './default';\nimport { NgrxNumberViewAdapter } from './number';\nimport { NgrxRadioViewAdapter } from './radio';\nimport { NgrxRangeViewAdapter } from './range';\nimport { NgrxSelectViewAdapter } from './select';\nimport { NgrxSelectMultipleViewAdapter } from './select-multiple';\nimport { FormViewAdapter } from './view-adapter';\n\nconst BUILTIN_ADAPTERS = [\n  NgrxCheckboxViewAdapter,\n  NgrxRangeViewAdapter,\n  NgrxNumberViewAdapter,\n  NgrxSelectViewAdapter,\n  NgrxSelectMultipleViewAdapter,\n  NgrxRadioViewAdapter,\n];\n\nexport function isBuiltInViewAdapter(viewAdapter: FormViewAdapter): boolean {\n  return BUILTIN_ADAPTERS.some(a => viewAdapter.constructor === a);\n}\n\nexport function selectViewAdapter(viewAdapters: FormViewAdapter[]): FormViewAdapter {\n  if (!viewAdapters) {\n    throw new Error('No view adapter matches!');\n  }\n\n  let defaultAdapter: FormViewAdapter | undefined;\n  let builtinAdapter: FormViewAdapter | undefined;\n  let customAdapter: FormViewAdapter | undefined;\n  viewAdapters.forEach((v: FormViewAdapter) => {\n    if (v.constructor === NgrxDefaultViewAdapter) {\n      defaultAdapter = v;\n    } else if (isBuiltInViewAdapter(v)) {\n      if (builtinAdapter) {\n        throw new Error('More than one built-in view adapter matches!');\n      }\n\n      builtinAdapter = v;\n    } else {\n      if (customAdapter) {\n        throw new Error('More than one custom view adapter matches!');\n      }\n\n      customAdapter = v;\n    }\n  });\n\n  if (customAdapter) {\n    return customAdapter;\n  }\n\n  if (builtinAdapter) {\n    return builtinAdapter;\n  }\n\n  if (defaultAdapter) {\n    return defaultAdapter;\n  }\n\n  throw new Error('No valid view adapter!');\n}\n","import { box, Boxed, unbox } from '../boxing';\n\nexport interface NgrxValueConverter<TView, TState> {\n  convertViewToStateValue(value: TView): TState;\n  convertStateToViewValue(value: TState): TView;\n}\n\n// tslint:disable-next-line:variable-name\nexport const NgrxValueConverters = {\n  default<T>() {\n    return {\n      convertViewToStateValue: value => typeof value === 'object' && value !== null ? box(value) : value,\n      convertStateToViewValue: unbox,\n    } as NgrxValueConverter<T, Boxed<T> | T>;\n  },\n  dateToISOString: {\n    convertViewToStateValue: date => date === null ? null : date.toISOString(),\n    convertStateToViewValue: s => s === null ? null : new Date(Date.parse(s)),\n  } as NgrxValueConverter<Date | null, string | null>,\n  objectToJSON: {\n    convertViewToStateValue: value => value === null ? null : JSON.stringify(value),\n    convertStateToViewValue: s => s === null ? null : JSON.parse(s),\n  } as NgrxValueConverter<{} | null, string | null>,\n};\n","import { DOCUMENT } from '@angular/common';\nimport {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  HostBinding,\n  HostListener,\n  Inject,\n  Input,\n  OnInit,\n  Optional,\n  Self,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ActionsSubject } from '@ngrx/store';\n\nimport { Actions, FocusAction, MarkAsDirtyAction, MarkAsTouchedAction, SetValueAction, UnfocusAction } from '../actions';\nimport { FormControlState, FormControlValueTypes } from '../state';\nimport { selectViewAdapter } from '../view-adapter/util';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from '../view-adapter/view-adapter';\nimport { NgrxValueConverter, NgrxValueConverters } from './value-converter';\n\nexport interface Document {\n  activeElement: any;\n}\n\nexport enum NGRX_UPDATE_ON_TYPE {\n  CHANGE = 'change',\n  BLUR = 'blur',\n  NEVER = 'never',\n}\n\nclass ControlValueAccessorAdapter implements FormViewAdapter {\n  constructor(private valueAccessor: ControlValueAccessor) { }\n\n  setViewValue(value: any): void {\n    this.valueAccessor.writeValue(value);\n  }\n\n  setOnChangeCallback(fn: (value: any) => void): void {\n    this.valueAccessor.registerOnChange(fn);\n  }\n  setOnTouchedCallback(fn: () => void): void {\n    this.valueAccessor.registerOnTouched(fn);\n  }\n\n  setIsDisabled(isDisabled: boolean) {\n    if (this.valueAccessor.setDisabledState) {\n      this.valueAccessor.setDisabledState(isDisabled);\n    }\n  }\n}\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: ':not([ngrxFormsAction])[ngrxFormControlState]',\n})\nexport class NgrxFormControlDirective<TStateValue extends FormControlValueTypes, TViewValue = TStateValue> implements AfterViewInit, OnInit {\n  private isInitialized = false;\n  private focusTrackingIsEnabled = false;\n\n  @Input() set ngrxFormControlState(newState: FormControlState<TStateValue>) {\n    if (!newState) {\n      throw new Error('The control state must not be undefined!');\n    }\n\n    const oldState = this.state;\n    this.state = newState;\n\n    if (this.isInitialized) {\n      this.updateViewIfControlIdChanged(newState, oldState);\n      this.updateViewIfValueChanged(newState, oldState);\n      this.updateViewIfIsDisabledChanged(newState, oldState);\n      this.updateViewIfIsFocusedChanged(newState, oldState);\n    }\n  }\n\n  @Input() ngrxUpdateOn: NGRX_UPDATE_ON_TYPE = NGRX_UPDATE_ON_TYPE.CHANGE;\n  @Input() set ngrxEnableFocusTracking(value: boolean) {\n    if (value && !this.dom) {\n      throw new Error('focus tracking is only supported on the browser platform');\n    }\n\n    this.focusTrackingIsEnabled = value;\n  }\n\n  @Input() ngrxValueConverter: NgrxValueConverter<TViewValue, TStateValue> = NgrxValueConverters.default<any>();\n\n  // TODO: move this into a separate directive\n  // automatically apply the attribute that's used by the CDK to set initial focus\n  @HostBinding('attr.cdk-focus-region-start') get focusRegionStartAttr() {\n    return this.state && this.state.isFocused ? '' : null;\n  }\n\n  state: FormControlState<TStateValue>;\n\n  private viewAdapter: FormViewAdapter;\n\n  // we have to store the latest known state value since most input elements don't play nicely with\n  // setting the same value again (e.g. input elements move the cursor to the end of the input when\n  // a new value is set which means whenever the user types something the cursor is forced to the\n  // end of the input) which would for example happen every time a new value is pushed to the state\n  // since when the action to update the state is dispatched a new state will be received inside\n  // the directive, which in turn would trigger a view update; to prevent this behavior we compare\n  // the latest known state value with the value to be set and filter out those values that are equal\n  // to the latest known value\n  private viewValue: TViewValue;\n  private stateValue: TStateValue;\n\n  constructor(\n    private el: ElementRef,\n    // for the dom parameter the `null` type must be last to ensure that in the compiled output\n    // there is no reference to the Document type to support non-browser platforms\n    @Optional() @Inject(DOCUMENT) private dom: Document | null,\n    @Optional() @Inject(ActionsSubject) private actionsSubject: ActionsSubject | null,\n    @Self() @Optional() @Inject(NGRX_FORM_VIEW_ADAPTER) viewAdapters: FormViewAdapter[],\n    @Self() @Optional() @Inject(NG_VALUE_ACCESSOR) valueAccessors: ControlValueAccessor[],\n  ) {\n    viewAdapters = viewAdapters || [];\n    valueAccessors = valueAccessors || [];\n\n    if (valueAccessors.length > 1) {\n      throw new Error('More than one custom control value accessor matches!');\n    }\n\n    this.viewAdapter = valueAccessors.length > 0\n      ? new ControlValueAccessorAdapter(valueAccessors[0])\n      : selectViewAdapter(viewAdapters);\n  }\n\n  updateViewIfControlIdChanged(newState: FormControlState<TStateValue>, oldState: FormControlState<TStateValue> | undefined) {\n    if (oldState && newState.id === oldState.id) {\n      return;\n    }\n\n    this.stateValue = newState.value;\n    this.viewValue = this.ngrxValueConverter.convertStateToViewValue(this.stateValue);\n    this.viewAdapter.setViewValue(this.viewValue);\n    if (this.viewAdapter.setIsDisabled) {\n      this.viewAdapter.setIsDisabled(newState.isDisabled);\n    }\n  }\n\n  updateViewIfValueChanged(newState: FormControlState<TStateValue>, _: FormControlState<TStateValue> | undefined) {\n    if (newState.value === this.stateValue) {\n      return;\n    }\n\n    this.stateValue = newState.value;\n    this.viewValue = this.ngrxValueConverter.convertStateToViewValue(newState.value);\n    this.viewAdapter.setViewValue(this.viewValue);\n  }\n\n  updateViewIfIsDisabledChanged(newState: FormControlState<TStateValue>, oldState: FormControlState<TStateValue> | undefined) {\n    if (!this.viewAdapter.setIsDisabled) {\n      return;\n    }\n\n    if (oldState && newState.isDisabled === oldState.isDisabled) {\n      return;\n    }\n\n    this.viewAdapter.setIsDisabled(newState.isDisabled);\n  }\n\n  updateViewIfIsFocusedChanged(newState: FormControlState<TStateValue>, oldState: FormControlState<TStateValue> | undefined) {\n    if (!this.focusTrackingIsEnabled) {\n      return;\n    }\n\n    if (oldState && newState.isFocused === oldState.isFocused) {\n      return;\n    }\n\n    if (newState.isFocused) {\n      this.el.nativeElement.focus();\n    } else {\n      this.el.nativeElement.blur();\n    }\n  }\n\n  protected dispatchAction(action: Actions<TStateValue>) {\n    if (this.actionsSubject !== null) {\n      this.actionsSubject.next(action);\n    } else {\n      throw new Error('ActionsSubject must be present in order to dispatch actions!');\n    }\n  }\n\n  ngOnInit() {\n    if (!this.state) {\n      throw new Error('The form state must not be undefined!');\n    }\n\n    this.isInitialized = true;\n\n    this.updateViewIfControlIdChanged(this.state, undefined);\n    this.updateViewIfValueChanged(this.state, undefined);\n    this.updateViewIfIsDisabledChanged(this.state, undefined);\n    this.updateViewIfIsFocusedChanged(this.state, undefined);\n\n    const dispatchMarkAsDirtyAction = () => {\n      if (this.state.isPristine) {\n        this.dispatchAction(new MarkAsDirtyAction(this.state.id));\n      }\n    };\n\n    const dispatchSetValueAction = () => {\n      this.stateValue = this.ngrxValueConverter.convertViewToStateValue(this.viewValue);\n      if (this.stateValue !== this.state.value) {\n        this.dispatchAction(new SetValueAction(this.state.id, this.stateValue));\n\n        dispatchMarkAsDirtyAction();\n      }\n    };\n\n    this.viewAdapter.setOnChangeCallback((viewValue: TViewValue) => {\n      this.viewValue = viewValue;\n\n      if (this.ngrxUpdateOn === NGRX_UPDATE_ON_TYPE.CHANGE) {\n        dispatchSetValueAction();\n      }\n    });\n\n    this.viewAdapter.setOnTouchedCallback(() => {\n      if (!this.state.isTouched && this.ngrxUpdateOn !== NGRX_UPDATE_ON_TYPE.NEVER) {\n        this.dispatchAction(new MarkAsTouchedAction(this.state.id));\n      }\n\n      if (this.ngrxUpdateOn === NGRX_UPDATE_ON_TYPE.BLUR) {\n        dispatchSetValueAction();\n      }\n    });\n  }\n\n  ngAfterViewInit() {\n    // we need to update the view again after it was initialized since some\n    // controls depend on child elements for setting the value (e.g. selects)\n    this.viewAdapter.setViewValue(this.viewValue);\n    if (this.viewAdapter.setIsDisabled) {\n      this.viewAdapter.setIsDisabled(this.state.isDisabled);\n    }\n  }\n\n  @HostListener('focusin')\n  @HostListener('focusout')\n  onFocusChange() {\n    if (!this.focusTrackingIsEnabled) {\n      return;\n    }\n\n    const isControlFocused = this.el.nativeElement === this.dom!.activeElement;\n    if (isControlFocused !== this.state.isFocused) {\n      this.dispatchAction(isControlFocused ? new FocusAction(this.state.id) : new UnfocusAction(this.state.id));\n    }\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Inject,\n  Optional,\n  Output,\n  Self,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { Actions } from '../actions';\nimport { FormControlValueTypes } from '../state';\nimport { FormViewAdapter, NGRX_FORM_VIEW_ADAPTER } from '../view-adapter/view-adapter';\nimport { Document, NgrxFormControlDirective } from './directive';\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: '[ngrxFormControlState][ngrxFormsAction]',\n})\nexport class NgrxLocalFormControlDirective<TStateValue extends FormControlValueTypes, TViewValue = TStateValue>\n  extends NgrxFormControlDirective<TStateValue, TViewValue> {\n\n  @Output() ngrxFormsAction = new EventEmitter<Actions<TStateValue>>();\n\n  constructor(\n    el: ElementRef,\n    @Optional() @Inject(DOCUMENT) dom: Document | null,\n    @Self() @Optional() @Inject(NGRX_FORM_VIEW_ADAPTER) viewAdapters: FormViewAdapter[],\n    @Self() @Optional() @Inject(NG_VALUE_ACCESSOR) valueAccessors: ControlValueAccessor[],\n  ) {\n    super(el, dom, null, viewAdapters, valueAccessors);\n  }\n\n  protected dispatchAction(action: Actions<TStateValue>) {\n    this.ngrxFormsAction.emit(action);\n  }\n}\n","import { Directive, HostListener, Inject, Input, OnInit, Optional } from '@angular/core';\nimport { ActionsSubject } from '@ngrx/store';\n\nimport { Actions, MarkAsSubmittedAction } from '../actions';\nimport { FormGroupState } from '../state';\n\n// this interface just exists to prevent a direct reference to\n// `Event` in our code, which otherwise causes issues in NativeScript\n// applications\ninterface CustomEvent extends Event { }\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'form:not([ngrxFormsAction])[ngrxFormState]',\n})\nexport class NgrxFormDirective<TValue extends { [key: string]: any }> implements OnInit {\n  // tslint:disable-next-line:no-input-rename\n  @Input('ngrxFormState') state: FormGroupState<TValue>;\n\n  constructor(\n    @Optional() @Inject(ActionsSubject) private actionsSubject: ActionsSubject | null\n  ) {\n    this.actionsSubject = actionsSubject;\n  }\n\n  protected dispatchAction(action: Actions<TValue>) {\n    if (this.actionsSubject !== null) {\n      this.actionsSubject.next(action);\n    } else {\n      throw new Error('ActionsSubject must be present in order to dispatch actions!');\n    }\n  }\n\n  ngOnInit() {\n    if (!this.state) {\n      throw new Error('The form state must not be undefined!');\n    }\n  }\n\n  @HostListener('submit', ['$event'])\n  onSubmit(event: CustomEvent) {\n    event.preventDefault();\n    if (this.state.isUnsubmitted) {\n      this.dispatchAction(new MarkAsSubmittedAction(this.state.id));\n    }\n  }\n}\n","import { Directive, EventEmitter, Output } from '@angular/core';\n\nimport { Actions } from '../actions';\nimport { NgrxFormDirective } from './directive';\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'form[ngrxFormState][ngrxFormsAction]',\n})\nexport class NgrxLocalFormDirective<TValue extends { [key: string]: any }>\n  extends NgrxFormDirective<TValue> {\n\n  @Output() ngrxFormsAction = new EventEmitter<Actions<TValue>>();\n\n  constructor() {\n    super(null);\n  }\n\n  protected dispatchAction(action: Actions<TValue>) {\n    this.ngrxFormsAction.emit(action);\n  }\n}\n","import { Directive, HostBinding, Input } from '@angular/core';\nimport { AbstractControlState } from './state';\n\n/**\n * Lists the available status class names based on the property\n * they are depending on.\n */\nexport const NGRX_STATUS_CLASS_NAMES = {\n  isValid: 'ngrx-forms-valid',\n  isInvalid: 'ngrx-forms-invalid',\n  isDirty: 'ngrx-forms-dirty',\n  isPristine: 'ngrx-forms-pristine',\n  isTouched: 'ngrx-forms-touched',\n  isUntouched: 'ngrx-forms-untouched',\n  isSubmitted: 'ngrx-forms-submitted',\n  isUnsubmitted: 'ngrx-forms-unsubmitted',\n  isValidationPending: 'ngrx-forms-validation-pending',\n};\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: 'form[ngrxFormState],[ngrxFormControlState]',\n})\nexport class NgrxStatusCssClassesDirective {\n  private state: AbstractControlState<any>;\n\n  @Input()\n  set ngrxFormControlState(state: AbstractControlState<any>) {\n    this.state = state;\n  }\n\n  @Input()\n  set ngrxFormState(state: AbstractControlState<any>) {\n    this.state = state;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isValid}`)\n  get isValid() {\n    return this.state.isValid;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isInvalid}`)\n  get isInvalid() {\n    return this.state.isInvalid;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isDirty}`)\n  get isDirty() {\n    return this.state.isDirty;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isPristine}`)\n  get isPristine() {\n    return this.state.isPristine;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isTouched}`)\n  get isTouched() {\n    return this.state.isTouched;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isUntouched}`)\n  get isUntouched() {\n    return this.state.isUntouched;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isSubmitted}`)\n  get isSubmitted() {\n    return this.state.isSubmitted;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isUnsubmitted}`)\n  get isUnsubmitted() {\n    return this.state.isUnsubmitted;\n  }\n\n  @HostBinding(`class.${NGRX_STATUS_CLASS_NAMES.isValidationPending}`)\n  get isValidationPending() {\n    return this.state.isValidationPending;\n  }\n}\n","import { NgModule } from '@angular/core';\n\nimport { NgrxFormControlDirective } from './control/directive';\nimport { NgrxLocalFormControlDirective } from './control/local-state-directive';\nimport { NgrxFormDirective } from './group/directive';\nimport { NgrxLocalFormDirective } from './group/local-state-directive';\nimport { NgrxStatusCssClassesDirective } from './status-css-classes.directive';\nimport { NgrxCheckboxViewAdapter } from './view-adapter/checkbox';\nimport { NgrxDefaultViewAdapter } from './view-adapter/default';\nimport { NgrxNumberViewAdapter } from './view-adapter/number';\nimport { NgrxFallbackSelectOption } from './view-adapter/option';\nimport { NgrxRadioViewAdapter } from './view-adapter/radio';\nimport { NgrxRangeViewAdapter } from './view-adapter/range';\nimport { NgrxSelectOption, NgrxSelectViewAdapter } from './view-adapter/select';\nimport { NgrxSelectMultipleOption, NgrxSelectMultipleViewAdapter } from './view-adapter/select-multiple';\n\nconst exportsAndDeclarations = [\n  NgrxFormControlDirective,\n  NgrxLocalFormControlDirective,\n  NgrxFormDirective,\n  NgrxLocalFormDirective,\n  NgrxCheckboxViewAdapter,\n  NgrxDefaultViewAdapter,\n  NgrxNumberViewAdapter,\n  NgrxRadioViewAdapter,\n  NgrxRangeViewAdapter,\n  NgrxSelectMultipleOption,\n  NgrxSelectMultipleViewAdapter,\n  NgrxSelectOption,\n  NgrxSelectViewAdapter,\n  NgrxFallbackSelectOption,\n  NgrxStatusCssClassesDirective,\n];\n\n@NgModule({\n  declarations: exportsAndDeclarations,\n  exports: exportsAndDeclarations,\n})\nexport class NgrxFormsModule { }\n","/**\n * ngrx-forms\n * Proper integration of forms in Angular applications using Ngrx\n * Written by Jonathan Ziller.\n * MIT license.\n * https://github.com/MrWolfZ/ngrx-forms\n */\nexport * from './src/ngrx-forms';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {Document as d} from './src/control/directive';\nexport {isFormState as a,verifyFormControlValueIsValid as b} from './src/state';\nexport {abstractControlReducer as c} from './src/update-function/util';"],"names":["clearAsyncErrorReducer","disableReducer","enableReducer","markAsDirtyReducer","markAsPristineReducer","markAsSubmittedReducer","markAsTouchedReducer","markAsUnsubmittedReducer","markAsUntouchedReducer","resetReducer","setAsyncErrorReducer","setErrorsReducer","setUserDefinedPropertyReducer","setValueReducer","startAsyncValidationReducer","dispatchActionPerChild","callChildReducers","childReducer","addControlReducer","removeControlReducer","tslib_1.__decorate","tslib_1.__param","NULL_VIEW_ADAPTER","NULL_RENDERER"],"mappings":"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"}